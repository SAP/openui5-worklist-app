/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","./Label","./StepInput","./DateTimePicker","sap/ui/unified/Calendar","sap/ui/unified/DateRange","sap/ui/unified/calendar/MonthPicker","sap/ui/unified/calendar/CustomMonthPicker","sap/ui/core/format/TimezoneUtil"],function(e,t,a,n,r,o,i,s,u){"use strict";var l=e.extend("sap.m.DynamicDateOption",{metadata:{library:"sap.m",properties:{key:{type:"string"},valueTypes:{type:"string[]",multiple:true}}}});l.prototype.getText=function(e){return this.getKey()};l.prototype.getValueHelpUITypes=function(e){throw new Error("Need implementation for method getValueHelpUITypes. Option: "+this.getKey())};l.prototype.createValueHelpUI=function(e,a){var n=e.getValue()&&Object.assign({},e.getValue()),r=this.getValueHelpUITypes(e),o=r.length,i=[],s;if(!e.aControlsByParameters){e.aControlsByParameters={}}e.aControlsByParameters[this.getKey()]=[];if(n&&n.values){n.values=n.values.map(function(t){if(t instanceof Date){return e._reverseConvertDate(t)}return t})}for(var u=0;u<r.length;u++){if(r[u].getText()){i.push(new t({text:r[u].getText(),width:"100%"}))}var l=false;if(e&&n){l=e._checkFormatterUTCTimezone(n.operator)}s=this._createControl(u,r[u].getType(),n,a,o,l);i.push(s);e.aControlsByParameters[this.getKey()].push(s)}return i};l.prototype.validateValueHelpUI=function(e){var t=this.getValueHelpUITypes();for(var a=0;a<t.length;a++){var n=e.aControlsByParameters[this.getKey()][a];switch(t[a].getType()){case"int":if(n._isLessThanMin(n.getValue())||n._isMoreThanMax(n.getValue())){return false}break;case"month":case"custommonth":case"date":case"daterange":if(!n.getSelectedDates()||n.getSelectedDates().length==0){return false}break;case"datetime":if(!n.getDateValue()){return false}break}}return true};l.prototype.getValueHelpOutput=function(e){var t=this.getValueHelpUITypes(),a={},n;a.operator=this.getKey();a.values=[];for(var r=0;r<t.length;r++){var o=e.aControlsByParameters[this.getKey()][r];switch(t[r].getType()){case"int":n=o.getValue();break;case"month":case"date":if(!o.getSelectedDates().length){return null}n=o.getSelectedDates()[0].getStartDate();break;case"custommonth":if(!o.getSelectedDates()||!o.getSelectedDates().length){return null}n=[o.getSelectedDates()[0].getStartDate().getMonth(),o.getSelectedDates()[0].getStartDate().getFullYear()];break;case"datetime":if(!o.getDateValue()){return null}n=o.getDateValue();break;case"daterange":if(!o.getSelectedDates().length){return null}var i=o.getSelectedDates()[0].getEndDate()||o.getSelectedDates()[0].getStartDate();n=[o.getSelectedDates()[0].getStartDate(),i];break;default:break}if(Array.isArray(n)){a.values=Array.prototype.concat.apply(a.values,n)}else{n&&a.values.push(n)}}return a};l.prototype.getGroup=function(){return 0};l.prototype.getGroupHeader=function(){var e=this.getGroup()>-1&&this.getGroup()<7?this.getGroup():0;return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("DDR_OPTIONS_GROUP_"+e)};l.prototype.format=function(e){throw new Error("Need implementation for method format. Option: "+this.getKey())};l.prototype.parse=function(e){throw new Error("Need implementation for method parse. Option: "+this.getKey())};l.prototype.toDates=function(e){throw new Error("Need implementation for method toDates. Option: "+this.getKey())};l.prototype.enhanceFormattedValue=function(){return false};l.prototype._createControl=function(e,t,a,n,r,o){var i;switch(t){case"int":i=this._createIntegerControl(a,e,n);break;case"date":i=this._createDateControl(a,e,n,o);break;case"datetime":if(r===1){i=this._createDateTimeInnerControl(a,e,n,o)}else if(r===2){i=this._createDateTimeControl(a,e,n,o)}break;case"daterange":i=this._createDateRangeControl(a,e,n,o);break;case"month":i=this._createMonthControl(a,e,n);break;case"custommonth":i=this._createCustomMonthControl(a,e,n);break;default:break}return i};l.prototype._createIntegerControl=function(e,t,n){var r=new a({width:"120px"});if(e&&this.getKey()===e.operator){r.setValue(e.values[t])}if(n instanceof Function){r.attachChange(function(){n(this)},this)}return r};l.prototype._createDateTimeControl=function(e,t,a){var r=new n({timezone:u.getLocalTimezone()});if(e&&this.getKey()===e.operator){r.setDateValue(e.values[t])}if(a instanceof Function){r.attachChange(function(){a(this)},this)}return r};l.prototype._createDateControl=function(e,t,a,n){var i=new r({width:"100%"});var s;if(e&&this.getKey()===e.operator){s=new Date(e.values[t].getTime());if(n){s.setMinutes(s.getMinutes()+(new Date).getTimezoneOffset())}i.addSelectedDate(new o({startDate:s}))}if(a instanceof Function){i.attachSelect(function(){a(this)},this)}return i};l.prototype._createDateTimeInnerControl=function(e,t,a,r){var i=new n({width:"100%"}),s;i._createPopup();i._createPopupContent();s=i._oPopupContent;s.setForcePhoneView(true);s.getCalendar().removeAllSelectedDates();if(e&&this.getKey()===e.operator){var u=new Date(e.values[t]);if(r){u.setMinutes(u.getMinutes()+(new Date).getTimezoneOffset())}s.getCalendar().addSelectedDate(new o({startDate:u}));s.getClocks()._setTimeValues(u)}if(a instanceof Function){s.getClocks().getAggregation("_clocks").forEach(function(e){e.attachChange(function(e){a(this)}.bind(this))}.bind(this));if(s.getClocks().getAggregation("_buttonAmPm")){s.getClocks().getAggregation("_buttonAmPm").attachSelectionChange(function(e){a(this)}.bind(this))}s.getCalendar().attachSelect(function(){a(this)},this)}return s};l.prototype._createDateRangeControl=function(e,t,a,n){var i=new r({intervalSelection:true,width:"100%"});if(e&&this.getKey()===e.operator){var s=new Date(e.values[t].getTime());var u=new Date(e.values[t+1].getTime());if(n){s.setMinutes(s.getMinutes()+(new Date).getTimezoneOffset());u.setMinutes(u.getMinutes()+(new Date).getTimezoneOffset())}i.addSelectedDate(new o({startDate:s,endDate:u}))}if(a instanceof Function){i.attachSelect(function(){a(this)},this)}return i};l.prototype._createMonthControl=function(e,t,a){var n=new i,r=new Date,s=e&&this.getKey()===e.operator?e.values[t]:r.getMonth();n.setMonth(s);n.addSelectedDate(new o({startDate:r}));if(a instanceof Function){n.attachSelect(function(){a(this)},this)}return n};l.prototype._createCustomMonthControl=function(e,t,a){var n=new s,r=new Date,i=e&&t>=0&&this.getKey()===e.operator?e.values[t]:r.getMonth(),u=e&&t>=0&&this.getKey()===e.operator?e.values[t+1]:r.getFullYear();r.setDate(1);r.setMonth(i);r.setYear(u);n.addSelectedDate(new o({startDate:r}));if(a instanceof Function){n.attachSelect(function(){a(this)},this)}return n};return l});
//# sourceMappingURL=DynamicDateOption.js.map