/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/base/Log","sap/base/security/URLListValidator"],function(e,r,t){"use strict";function i(e){return(!!e.getTitle()||e._isDisplayDownloadButton())&&!e._bIsPopupOpen}var n=Object.freeze(["application/pdf","application/x-google-chrome-pdf"]);var a={apiVersion:2};a._isSupportedMimeType=function(e){var r=n.indexOf(e);return r>-1};a._isPdfPluginEnabled=function(){var r=true;if(e.browser.firefox){return r}if(typeof navigator.pdfViewerEnabled!=="undefined"){if(navigator.pdfViewerEnabled||/HeadlessChrome/.test(window.navigator.userAgent)){return r}else{r=false}}else{var t=navigator.mimeTypes;r=n.some(function(e){var r=t.namedItem(e);return r!==null})}return r};a.render=function(e,r){e.openStart("div",r);e.style("width",r._getRenderWidth());e.style("height",r._getRenderHeight());this._writeAccessibilityTags(e,r);e.openEnd();if(i(r)){e.renderControl(r._objectsRegister.getOverflowToolbarControl())}if(r._isEmbeddedModeAllowed()&&this._isPdfPluginEnabled()){this.renderPdfContent(e,r)}e.close("div")};a._writeAccessibilityTags=function(e,r){e.attr("role","document");e.attr("aria-label",r._getLibraryResourceBundle().getText("PDF_VIEWER_ACCESSIBILITY_LABEL"))};a.renderPdfContent=function(n,o){if(o._shouldRenderPdfContent()&&!/HeadlessChrome/.test(window.navigator.userAgent)){n.openStart("iframe",o.getId()+"-iframe");var s=o.getSource();var d=o.getSource().indexOf("#");if(d>-1){s=s.substr(0,d)}if(!(e.browser.safari&&s.startsWith("blob:"))){s+="#view=FitH"}if(!t.validate(s)){s=encodeURI(s)}if(t.validate(s)){n.attr("src",s)}else{o._fireErrorEvent()}n.class("sapMPDFViewerContent");n.class("sapMPDFViewerLoading");n.attr("aria-label",o._getLibraryResourceBundle().getText("PDF_VIEWER_CONTENT_ACCESSIBILITY_LABEL"));if(i(o)){n.class("sapMPDFViewerReducedContent")}n.openEnd();n.close("iframe")}else{this.renderErrorContent(n,o);if(!a._isPdfPluginEnabled()){r.warning("The PDF plug-in is not available on this device.");o.fireEvent("error",{},true)}}};a.renderErrorContent=function(e,r){var t=r.getErrorPlaceholder()?r.getErrorPlaceholder():r._objectsRegister.getPlaceholderMessagePageControl();e.openStart("div");e.class("sapMPDFViewerError");if(!r._bIsPopupOpen){e.class("sapMPDFViewerEmbeddedContent")}e.openEnd();e.renderControl(t);e.close("div")};return a},true);
//# sourceMappingURL=PDFViewerRenderer.js.map