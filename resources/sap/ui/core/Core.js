/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","sap/ui/Device","sap/ui/Global","sap/ui/base/DataType","sap/ui/base/EventProvider","sap/ui/base/Interface","sap/ui/base/Object","sap/ui/base/ManagedObject","./Component","./Configuration","./Element","./ElementMetadata","./Rendering","./RenderManager","./UIArea","./message/MessageManager","sap/base/i18n/ResourceBundle","sap/base/Log","sap/ui/performance/Measurement","sap/ui/security/FrameOptions","sap/base/assert","sap/base/util/ObjectPath","sap/base/util/Version","sap/base/util/array/uniqueSort","sap/ui/performance/trace/initTraces","sap/base/util/LoaderExtensions","sap/base/util/isEmptyObject","sap/base/util/deepExtend","sap/base/util/each","sap/base/util/mixedFetch","./_UrlResolver","sap/ui/VersionInfo","sap/ui/thirdparty/URI","sap/ui/events/jquery/EventSimulation"],function(jQuery,e,t,n,r,i,o,a,s,u,c,l,p,d,f,h,g,y,m,b,v,E,C,T,S,M,L,_,I,P,j,A,R){"use strict";if(sap.ui.getCore&&sap.ui.getCore()){return sap.ui.getCore()}var w;var V;S();var U={};var k={};var z=[];var O={};var N;var B=function(e,t){var n=[],r=0,i=0;this.startTask=function(e){var t=n.length;n[t]={name:e,finished:false};r++;return t};this.finishTask=function(t,a){if(!n[t]||n[t].finished){throw new Error("trying to finish non existing or already finished task")}n[t].finished=true;r--;if(a===false){i++}if(r===0){y.info("Sync point '"+e+"' finished (tasks:"+n.length+", open:"+r+", failures:"+i+")");o()}};function o(){if(t){t(r,i)}t=null}y.info("Sync point '"+e+"' created")};var q=o.extend("sap.ui.core.Core",{constructor:function(){var e=this,t="sap.ui.core.Core";if(sap.ui.getCore&&sap.ui.getCore()){y.error("Only the framework must create an instance of sap/ui/core/Core."+" To get access to its functionality, use sap.ui.getCore().");return sap.ui.getCore()}o.call(this);N=new r;["attachEvent","detachEvent","getEventingParent"].forEach(function(e){q.prototype[e]=N[e].bind(N)});this.bBooted=false;this.bInitialized=false;this.aPlugins=[];this.mLibraries={};this.mResourceBundles={};this.oModels={};this.oEventBus=null;Object.defineProperty(this,"mElements",{get:function(){y.error("oCore.mElements was a private member and has been removed. Use one of the methods in sap.ui.core.Element.registry instead");return c.registry.all()},configurable:false});this.mObjects={template:{}};this.oRootComponent=null;this.aInitListeners=[];this.bInitLegacyLib=false;y.info("Creating Core",null,t);m.start("coreComplete","Core.js - complete");m.start("coreBoot","Core.js - boot");m.start("coreInit","Core.js - init");u.setCore(this);var n=u.getValue("frameOptionsConfig")||{};n.mode=u.getFrameOptions();n.allowlistService=u.getAllowlistService();this.oFrameOptions=new b(n);this._grantFriendAccess();var i=this.aModules=u.getValue("modules");if(u.getDebug()){i.unshift("sap.ui.debug.DebugEnv")}var a=i.indexOf("sap.ui.core.library");if(a!=0){if(a>0){i.splice(a,1)}i.unshift("sap.ui.core.library")}if(u.getValue("xx-lesssupport")&&i.indexOf("sap.ui.core.plugin.LessSupport")==-1){y.info("Including LessSupport into declared modules");i.push("sap.ui.core.plugin.LessSupport")}var s=u.getPreload();var l=s==="async"||sap.ui.loader.config().async;u.getValue("xx-libraryPreloadFiles").forEach(function(e){var t=String(e).trim().split(/\s*:\s*/),n=t[0],r=t[1];if(t.length===1){r=n;n=""}if(/^(?:none|js|json|both)$/.test(r)){x[n]=r}});document.documentElement.classList.add("sapUiTheme-"+u.getTheme());y.info("Declared theme "+u.getTheme(),null,t);y.info("Declared modules: "+i,t);this._setupContentDirection();this._setupBrowser();this._setupOS();this._setupLang();this._setupAnimation();sap.ui.getCore=function(){return e.getInterface()};var p=new B("UI5 Document Ready",function(t,n){e.init()});var d=p.startTask("document.ready");var f=p.startTask("preload and boot");var h=function(){y.trace("document is ready");p.finishTask(d);document.removeEventListener("DOMContentLoaded",h)};if(document.readyState!=="loading"){h()}else{document.addEventListener("DOMContentLoaded",h)}var g=new B("UI5 Core Preloads and Bootstrap Script",function(t,n){y.trace("Core loaded: open="+t+", failures="+n);e._boot(l,function(){p.finishTask(f);m.end("coreBoot")})});var v=g.startTask("create sp2 tasks task");if(u.getValue("versionedLibCss")){var E=g.startTask("load version info");var C=function(e){if(e){y.trace('Loaded "sap-ui-version.json".')}else{y.error('Could not load "sap-ui-version.json".')}g.finishTask(E)};if(l){A.load().then(C,function(e){y.error('Unexpected error when loading "sap-ui-version.json": '+e);g.finishTask(E)})}else{C(sap.ui.getVersionInfo({async:l,failOnError:false}))}}this._polyfillFlexbox();var T=g.startTask("bootstrap script");this.boot=function(){if(this.bBooted){return}this.bBooted=true;S.call(this);g.finishTask(T)};function S(){var t=u.getValue("xx-bootTask");if(t){var n=g.startTask("custom boot task");t(function(e){g.finishTask(n,typeof e==="undefined"||e===true)})}if(s==="sync"||s==="async"){var r=e.aModules.reduce(function(e,t){var n=t.search(/\.library$/);if(n>=0){e.push(t.slice(0,n))}return e},[]);var i=this.loadLibraries(r,{async:l,preloadOnly:true});if(l){var o=g.startTask("preload bootstrap libraries");i.then(function(){g.finishTask(o)},function(){g.finishTask(o,false)})}}var a=u.getAppCacheBuster();if(a&&a.length>0){if(l){var c=g.startTask("require AppCachebuster");sap.ui.require(["sap/ui/core/AppCacheBuster"],function(e){e.boot(g);g.finishTask(c)})}else{var p=sap.ui.requireSync("sap/ui/core/AppCacheBuster");p.boot(g)}}if(u.getSupportMode()!==null){var d=g.startTask("support info script");var f=function(e,t){e.initializeSupportMode(u.getSupportMode(),l);t.initSupportRules(u.getSupportMode());g.finishTask(d)};if(l){sap.ui.require(["sap/ui/core/support/Support","sap/ui/support/Bootstrap"],f,function(e){y.error("Could not load support mode modules:",e)})}else{y.warning("Synchronous loading of Support mode. Set preload configuration to 'async' or switch to asynchronous bootstrap to prevent these synchronous request.","SyncXHR",null,function(){return{type:"SyncXHR",name:"support-mode"}});f(sap.ui.requireSync("sap/ui/core/support/Support"),sap.ui.requireSync("sap/ui/support/Bootstrap"))}}if(u.getTestRecorderMode()!==null){var h=g.startTask("test recorder script");var m=function(e){e.init(u.getTestRecorderMode());g.finishTask(h)};if(l){sap.ui.require(["sap/ui/testrecorder/Bootstrap"],m,function(e){y.error("Could not load test recorder:",e)})}else{y.warning("Synchronous loading of Test recorder mode. Set preload configuration to 'async' or switch to asynchronous bootstrap to prevent these synchronous request.","SyncXHR",null,function(){return{type:"SyncXHR",name:"test-recorder-mode"}});m(sap.ui.requireSync("sap/ui/testrecorder/Bootstrap"))}}g.finishTask(v)}},metadata:{publicMethods:["isInitialized","attachInit","getConfiguration","lock","unlock","isLocked","createUIArea","getUIArea","getUIDirty","applyChanges","getStaticAreaRef","createRenderManager","applyTheme","setThemeRoot","attachThemeChanged","detachThemeChanged","isThemeApplied","notifyContentDensityChanged","getAllLibrariesRequiringCss","getCurrentFocusedControlId","isMobile","getEventBus","byId","byFieldGroupId","getLoadedLibraries","loadLibrary","initLibrary","getLibraryResourceBundle","setModel","getModel","hasModel","getMessageManager","attachEvent","detachEvent","attachControlEvent","detachControlEvent","attachParseError","detachParseError","attachValidationError","detachValidationError","attachFormatError","detachFormatError","attachValidationSuccess","detachValidationSuccess","attachLocalizationChanged","detachLocalizationChanged","isStaticAreaRef","fireFormatError","fireValidationSuccess","fireValidationError","fireParseError","boot","addPrerenderingTask","setMessageManager","attachLibraryChanged","detachLibraryChanged","loadLibraries","attachThemeScopingChanged","detachThemeScopingChanged","fireThemeScopingChanged","includeLibraryTheme","attachInitEvent","registerPlugin","unregisterPlugin","setRoot","getRootComponent","getApplication","getControl","getComponent","getTemplate","createComponent","attachIntervalTimer","detachIntervalTimer","getElementById","getRenderManager"]}});q.M_EVENTS={ControlEvent:"ControlEvent",UIUpdated:"UIUpdated",ThemeChanged:"ThemeChanged",ThemeScopingChanged:"themeScopingChanged",LocalizationChanged:"localizationChanged",LibraryChanged:"libraryChanged",ValidationError:"validationError",ParseError:"parseError",FormatError:"formatError",ValidationSuccess:"validationSuccess"};q.prototype._grantFriendAccess=function(){var e=this;l.prototype.register=function(t){e.registerElementClass(t)}};q.prototype._setupContentDirection=function(){var e="sap.ui.core.Core",t=u.getRTL()?"rtl":"ltr";document.documentElement.setAttribute("dir",t);y.info("Content direction set to '"+t+"'",null,e)};q.prototype._setupBrowser=function(){var t="sap.ui.core.Core";var n=document.documentElement;var r=e.browser;var i=r.name;if(i){if(i===r.BROWSER.SAFARI&&r.mobile){i="m"+i}i=i+(r.version===-1?"":Math.floor(r.version));n.dataset.sapUiBrowser=i;y.debug("Browser-Id: "+i,null,t)}};q.prototype._setupOS=function(t){var t=document.documentElement;t.dataset.sapUiOs=e.os.name+e.os.versionStr;var n=null;switch(e.os.name){case e.os.OS.IOS:n="sap-ios";break;case e.os.OS.ANDROID:n="sap-android";break}if(n){t.classList.add(n)}};q.prototype._setupLang=function(){var e=document.documentElement;var t=function(){var t=u.getLocale();t?e.setAttribute("lang",t.toString()):e.removeAttribute("lang")};t.call(this);this.attachLocalizationChanged(t,this)};q.prototype._setupAnimation=function(){var e=document.documentElement;var t=u.getAnimationMode();e.dataset.sapUiAnimationMode=t;var n=t!==u.AnimationMode.minimal&&t!==u.AnimationMode.none;e.dataset.sapUiAnimation=n?"on":"off";if(typeof jQuery!=="undefined"){jQuery.fx.off=!n}};q.prototype._polyfillFlexbox=function(){jQuery.support.useFlexBoxPolyfill=false};q.prototype._boot=function(e,t){this.aModules.push("sap/ui/core/date/"+u.getCalendarType());if(e){return this._requireModulesAsync().then(function(){t()})}y.warning("Modules and libraries declared via bootstrap-configuration are loaded synchronously. Set preload configuration to"+" 'async' or switch to asynchronous bootstrap to prevent these requests.","SyncXHR",null,function(){return{type:"SyncXHR",name:"legacy-module"}});this.aModules.forEach(function(e){var t=e.match(/^(.*)\.library$/);if(t){this.loadLibrary(t[1])}else{sap.ui.requireSync(/^jquery\.sap\./.test(e)?e:e.replace(/\./g,"/"))}}.bind(this));t()};q.prototype._requireModulesAsync=function(){var e=[],t=[];this.aModules.forEach(function(n){var r=n.match(/^(.*)\.library$/);if(r){e.push(r[1])}else{t.push(/^jquery\.sap\./.test(n)?n:n.replace(/\./g,"/"))}});return Promise.all([this.loadLibraries(e),new Promise(function(e){sap.ui.require(t,function(){e(Array.prototype.slice.call(arguments))})})])};q.prototype.applyTheme=function(e,t){v(typeof e==="string","sThemeName must be a string");v(typeof t==="string"||typeof t==="undefined","sThemeBaseUrl must be a string or undefined");e=u.normalizeTheme(e,t);if(e&&u.getTheme()!=e){u.setTheme(e);this._getThemeManager().then(function(n){n.applyTheme(e,t,true)})}};q.prototype.setThemeRoot=function(e,t,n,r){this._getThemeManager().then(function(i){i.setThemeRoot(e,t,n,r)});return this};q.prototype.init=function(){if(this.bInitialized){return}f.setCore(this);var e="sap.ui.core.Core.init()";y.info("Initializing",null,e);m.end("coreInit");this._setBodyAccessibilityRole();var t=u.getValue("xx-waitForTheme");if(this.isThemeApplied()||!t){this._executeInitialization();p.renderPendingUIUpdates("during Core init")}else{if(t==="rendering"){p.notifyInteractionStep();this._executeInitialization();p.getLogger().debug("delay initial rendering until theme has been loaded");N.attachEventOnce(q.M_EVENTS.ThemeChanged,function(){p.renderPendingUIUpdates("after theme has been loaded",0)},this)}else if(t==="init"){p.getLogger().debug("delay init event and initial rendering until theme has been loaded");p.notifyInteractionStep();N.attachEventOnce(q.M_EVENTS.ThemeChanged,function(){this._executeInitialization();p.renderPendingUIUpdates("after theme has been loaded",0)},this)}this._getThemeManager()}};q.prototype._executeOnInit=function(){var e=u.getValue("onInit");if(e){if(typeof e==="function"){e()}else if(typeof e==="string"){var t=/^module\:((?:[_$.\-a-zA-Z0-9]+\/)*[_$.\-a-zA-Z0-9]+)$/.exec(e);if(t&&t[1]){setTimeout(sap.ui.require.bind(sap.ui,[t[1]]),0)}else{var n=E.get(e);if(typeof n==="function"){n()}else{y.warning("[Deprecated] Do not use inline JavaScript code with the oninit attribute."+" Use the module:... syntax or the name of a global function");window.eval(e)}}}}};q.prototype._setupRootComponent=function(){var e="sap.ui.core.Core.init()";var t=u.getRootComponent();if(t){y.info("Loading Root Component: "+t,null,e);var n=sap.ui.component({name:t});this.oRootComponent=n;var r=u.getValue("xx-rootComponentNode");if(r&&n.isA("sap.ui.core.UIComponent")){var i=document.getElementById(r);if(i){y.info("Creating ComponentContainer for Root Component: "+t,null,e);var a=sap.ui.requireSync("sap/ui/core/ComponentContainer"),s=new a({component:n,propagateModel:true});s.placeAt(i)}}}else{var c=u.getApplication();if(c){y.warning("The configuration 'application' is deprecated. Please use the configuration 'component' instead! "+"Please migrate from sap.ui.app.Application to sap.ui.core.Component.","SyncXHR",null,function(){return{type:"Deprecation",name:"sap.ui.core"}});y.info("Loading Application: "+c,null,e);sap.ui.requireSync(c.replace(/\./g,"/"));var l=E.get(c);v(l!==undefined,'The specified application "'+c+'" could not be found!');var p=new l;v(o.isA(p,"sap.ui.app.Application"),'The specified application "'+c+'" must be an instance of sap.ui.app.Application!')}}};q.prototype._setBodyAccessibilityRole=function(){var e=document.body;if(u.getAccessibility()&&u.getAutoAriaBodyRole()&&!e.getAttribute("role")){e.setAttribute("role","application")}};q.prototype._executeInitListeners=function(){var e="sap.ui.core.Core.init()";var t=this.aInitListeners;this.aInitListeners=undefined;if(t&&t.length>0){y.info("Fire Loaded Event",null,e);t.forEach(function(e){e()})}};q.prototype._executeInitialization=function(){var e="sap.ui.core.Core.init()";if(this.bInitialized){return}this.bInitialized=true;y.info("Initialized",null,e);y.info("Starting Plugins",null,e);this.startPlugins();y.info("Plugins started",null,e);this._executeOnInit();this._setupRootComponent();this._executeInitListeners()};q.prototype.isInitialized=function(){return this.bInitialized};q.prototype.isThemeApplied=function(){V=V||sap.ui.require("sap/ui/core/theming/ThemeManager");return V?V.themeLoaded:false};q.prototype._getThemeManager=function(e){V=V||sap.ui.require("sap/ui/core/theming/ThemeManager");if(!this.pThemeManager){if(!V){this.pThemeManager=new Promise(function(e,t){sap.ui.require(["sap/ui/core/theming/ThemeManager"],function(t){e(t)},t)})}else{this.pThemeManager=Promise.resolve(V)}this.pThemeManager=this.pThemeManager.then(function(e){e.attachEvent("ThemeChanged",function(e){this.fireThemeChanged(e.getParameters())}.bind(this));return e}.bind(this))}if(V&&e){V.reset()}return this.pThemeManager};q.prototype.attachInitEvent=function(e){v(typeof e==="function","fnFunction must be a function");if(this.aInitListeners){this.aInitListeners.push(e)}};q.prototype.attachInit=function(e){v(typeof e==="function","fnFunction must be a function");if(this.aInitListeners){this.aInitListeners.push(e)}else{e()}};q.prototype.lock=function(){this.bLocked=true};q.prototype.unlock=function(){this.bLocked=false};q.prototype.isLocked=function(){return this.bLocked};q.prototype.getConfiguration=function(){return u};q.prototype.getRenderManager=function(){return this.createRenderManager()};q.prototype.createRenderManager=function(){v(this.isInitialized(),"A RenderManager should be created only after the Core has been initialized");var e=new d;return e.getInterface()};q.prototype.getCurrentFocusedControlId=function(){if(!this.isInitialized()){throw new Error("Core must be initialized")}w=w||sap.ui.require("sap/ui/core/FocusHandler");return w?w.getCurrentFocusedControlId():null};var x={};function F(e){v(typeof e==="string"&&e||typeof e==="object"&&typeof e.name==="string"&&e.name&&(e.json==null||typeof e.json==="boolean"),"lib must be a non-empty string or an object with at least a non-empty 'name' property and an optional (boolean) property 'json'");var t="both";var n=false;if(typeof e==="object"){if(e.json===true){t="json"}else if(e.json===false){t="js"}n=!!e.lazy;e=e.name}var r=x[e]||x[""]||"both";if(r==="both"){r=t}else if(r!==t&&t!=="both"){r="none"}return{name:e,fileType:r,lazy:n}}function D(e){var t=this;e=F(e);var n=e.name,r=e.fileType,i=n.replace(/\./g,"/"),o=u.getDepCache();if(r==="none"||sap.ui.loader._.getModuleState(i+"/library.js")){return Promise.resolve(true)}var a=O[n]||(O[n]={});if(a.promise){return a.promise}if(e.lazy){y.debug("Lazy dependency to '"+n+"' encountered, loading library-preload-lazy.js");return sap.ui.loader._.loadJSResourceAsync(i+"/library-preload-lazy.js",true)}a.pending=true;a.async=true;var s;if(r!=="json"){var c=i+(o?"/library-h2-preload.js":"/library-preload.js");s=sap.ui.loader._.loadJSResourceAsync(c).then(function(){return W(n)},function(e){if(r!=="js"){y.error("failed to load '"+c+"' ("+(e&&e.message||e)+"), falling back to library-preload.json");return Z(n)}})}else{s=Z(n)}a.promise=s.then(function(e){var r=[],i=X(n);if(e&&e.length){var o=e.filter(function(e){return typeof e==="string"});var s=e.filter(function(e){return typeof e!=="string"});o=A._getTransitiveDependencyForLibraries(o);e=o.concat(s);r=e.map(D.bind(t))}if(i&&C(i._version).compareTo("1.9.0")>=0){r.push(t.getLibraryResourceBundle(n,true))}return Promise.all(r).then(function(){a.pending=false})});return a.promise}var H=new Map;function X(e){if(H.has(e)){return H.get(e)}var t=e.replace(/\./g,"/")+"/manifest.json";if(sap.ui.loader._.getModuleState(t)){var n=M.loadResource(t,{dataType:"json",async:false,failOnError:false});H.set(e,n);return n}}var $=new Set(["sap.suite.ui.generic.template","sap.ui.comp","sap.ui.layout","sap.ui.unified"]);function W(e){var t=X(e);var n=t&&t["sap.ui5"]&&t["sap.ui5"].dependencies&&t["sap.ui5"].dependencies.libs;if(n){return Object.keys(n).reduce(function(e,t){if(!n[t].lazy){e.push(t)}else if($.has(t)){e.push({name:t,lazy:true})}return e},[])}}function J(e,t){var n=e.modules,r=function(e){return/^jquery\.sap\./.test(e)?e:e.replace(/\./g,"/")};if(C(e.version||"1.0").compareTo("2.0")<0){n={};for(var i in e.modules){n[r(i)+".js"]=e.modules[i]}}sap.ui.require.preload(n,e.name,t)}function G(e){if(Array.isArray(e)){return e.map(function(e){return e.replace(/\.library-preload$/,"")})}return e}function Z(e){var t=Y(e,"/library-preload.json");return P(t,{headers:{Accept:P.ContentTypes.JSON}}).then(function(e){if(e.ok){return e.json().then(function(e){if(e){J(e,t);return G(e.dependencies)}})}else{throw new Error(e.statusText||e.status)}}).catch(function(e){y.error("failed to load '"+t+"': "+e.message)})}function K(e){e=F(e);var t=e.name,n=e.fileType,r=t.replace(/\./g,"/"),i=!!sap.ui.loader._.getModuleState(r+"/library.js");if(n==="none"||i){return}var o=O[t]||(O[t]={});if(o.pending===false){return}if(o.pending){if(e.lazy){return}else if(o.async){y.warning("request to load "+t+" synchronously while async loading is pending; this causes a duplicate request and should be avoided by caller")}else{y.warning("request to load "+t+" synchronously while sync loading is pending (cycle, ignored)");return}}if(e.lazy){y.debug("Lazy dependency to '"+t+"' encountered, loading library-preload-lazy.js");try{sap.ui.requireSync(r+"/library-preload-lazy")}catch(e){y.error("failed to load '"+r+"/library-preload-lazy.js"+"' synchronously ("+(e&&e.message||e)+")")}return}o.pending=true;o.async=false;var a;o.promise=new Promise(function(e,t){a=e});var s;if(n!=="json"){var u=r+"/library-preload";try{sap.ui.requireSync(u);s=W(t)}catch(e){y.error("failed to load '"+u+"' ("+(e&&e.message||e)+")");var c=e;while(c&&c.cause){c=c.cause}if(c&&c.name==="XHRLoadError"&&n!=="js"){s=Q(t)}}}else{s=Q(t)}if(s&&s.length){s.forEach(K)}o.pending=false;a()}function Q(e){var t=Y(e,"/library-preload.json");var n;return P(t,{headers:{Accept:P.ContentTypes.JSON}},true).then(function(e){if(e.ok){return e.json().then(function(e){if(e){J(e,t);n=e.dependencies}return G(n)})}else{throw Error(e.statusText||e.status)}}).catch(function(e){y.error("failed to load '"+t+"': "+e.message)}).unwrap()}function Y(e,t){return sap.ui.require.toUrl(e.replace(/\./g,"/")+t)}function ee(e,t){M.registerResourcePath(e.replace(/\./g,"/"),t)}q.prototype.loadLibrary=function(e,t){v(typeof e==="string","sLibrary must be a string");v(t===undefined||typeof t==="boolean"||typeof t==="string"||typeof t==="object"&&(t.url==null||typeof t.url==="string")&&(t.async==null||typeof t.async==="boolean"),"vUrl must be empty or a string or an object with an optional property 'url' of type string and an optional boolean property 'async'");if(typeof t==="boolean"){t={async:t}}if(typeof t==="object"){if(t.async){if(t.url&&O[e]==null){ee(e,t.url)}return this.loadLibraries([e]).then(function(){return this.mLibraries[e]}.bind(this))}t=t.url}if(!U[e]){var n=e+".library";if(t){ee(e,t)}if(u.getPreload()==="sync"||u.getPreload()==="async"){K(e)}sap.ui.requireSync(n.replace(/\./g,"/"));if(!U[e]){y.warning("library "+e+" didn't initialize itself");this.initLibrary(e)}}return this.mLibraries[e]};q.prototype.loadLibraries=function(e,t){v(Array.isArray(e),"aLibraries must be an array");t=Object.assign({async:true,preloadOnly:false},t);var n=u.getPreload()==="sync"||u.getPreload()==="async",r=t.async,i=!t.preloadOnly;function o(){return e.map(function(e){if(typeof e==="object"){e=e.name}return e.replace(/\./g,"/")+"/library"})}function a(){return new Promise(function(e,t){sap.ui.require(o(),function(){e()},t)})}function s(){o().forEach(sap.ui.requireSync)}if(r){e=A._getTransitiveDependencyForLibraries(e);var c=n?Promise.all(e.map(D.bind(this))):Promise.resolve(true);return i?c.then(a):c}else{if(n){e.forEach(K)}if(i){s()}}};q.prototype.createComponent=function(e,t,n,r){if(typeof e==="string"){e={name:e,url:t};if(typeof n==="object"){e.settings=n}else{e.id=n;e.settings=r}}if(e.async&&(e.manifest!==undefined||e.manifestFirst===undefined&&e.manifestUrl===undefined)){if(e.manifest===undefined){e.manifest=false}return s.create(e)}return sap.ui.component(e)};q.prototype.getRootComponent=function(){return this.oRootComponent};q.prototype.initLibrary=function(e){v(typeof e==="string"||typeof e==="object","oLibInfo must be a string or object");var t=typeof e==="string";if(t){e={name:e}}var r=e.name,i="sap.ui.core.Core.initLibrary()";if(t){y.error("[Deprecated] library "+r+" uses old fashioned initLibrary() call (rebuild with newest generator)")}if(!r){y.error("A library name must be provided.",null,i);return}else if(U[r]){return E.get(r)}y.debug("Analyzing Library "+r,null,i);U[r]=true;function o(e,t){var n,r;for(n in t){r=t[n];if(r!==undefined){if(Array.isArray(e[n])){if(e[n].length===0){e[n]=r}else{e[n]=T(e[n].concat(r))}}else if(e[n]===undefined){e[n]=r}else if(n!="name"){y.warning("library info setting ignored: "+n+"="+r)}}}return e}var a=E.create(r);this.mLibraries[r]=e=o(this.mLibraries[r]||{name:r,dependencies:[],types:[],interfaces:[],controls:[],elements:[]},e);for(var s=0;s<e.dependencies.length;s++){var u=e.dependencies[s];y.debug("resolve Dependencies to "+u,null,i);if(U[u]!==true){y.warning("Dependency from "+r+" to "+u+" has not been resolved by library itself",null,i);this.loadLibrary(u)}}n.registerInterfaceTypes(e.interfaces);for(var s=0;s<e.types.length;s++){if(!/^(any|boolean|float|int|string|object|void)$/.test(e.types[s])){sap.ui.loader._.declareModule(e.types[s].replace(/\./g,"/")+".js");var c=e.types[s].substring(0,e.types[s].lastIndexOf("."));if(E.get(c)===undefined){E.create(c)}}}var l=e.controls.concat(e.elements);for(var s=0;s<l.length;s++){sap.ui.lazyRequire(l[s],"new extend getMetadata")}if(!e.noLibraryCSS){var p={name:e.name,version:e.version};z.push(p);this._getThemeManager(true).then(function(e){e._includeLibraryThemeAndEnsureThemeRoot(p)})}e.sName=e.name;e.aControls=e.controls;this.fireLibraryChanged({name:r,stereotype:"library",operation:"add",metadata:e});return a};q.prototype.includeLibraryTheme=function(e,t,n){var r=this.getLoadedLibraries()[e];z.push({name:e,version:r&&r.version,variant:t});this._getThemeManager().then(function(r){r.includeLibraryTheme(e,t,n)})};q.prototype.getLoadedLibraries=function(){return Object.assign({},this.mLibraries)};q.prototype.getAllLibrariesRequiringCss=function(){return z.slice()};function te(e){if(e==null||e===true){return{bundleUrl:"messagebundle.properties"}}if(typeof e==="string"){return{bundleUrl:e}}if(typeof e==="object"){return _({},e)}}function ne(e){var t;var n=X(e);if(n&&C(n._version).compareTo("1.9.0")>=0){t=n["sap.ui5"]&&n["sap.ui5"].library&&n["sap.ui5"].library.i18n}t=te(t);return t}q.prototype.getLibraryResourceBundle=function(e,t,n){var r,i,o,a;if(typeof e==="boolean"){n=e;e=undefined;t=undefined}if(typeof t==="boolean"){n=t;t=undefined}v(e===undefined&&t===undefined||typeof e==="string","sLibraryName must be a string or there is no argument given at all");v(t===undefined||typeof t==="string","sLocale must be a string or omitted");e=e||"sap.ui.core";t=t||this.getConfiguration().getLanguage();r=e+"/"+t;a=H.has(e);var s=r+"/manifest-not-available";if(a){delete this.mResourceBundles[s]}else{r=s}i=this.mResourceBundles[r];if(!i||!n&&i instanceof Promise){o=ne(e);if(o){var u=Y(e+"/",o.bundleUrl);k[u]=e;i=g.create({bundleUrl:u,supportedLocales:o.supportedLocales,fallbackLocale:o.fallbackLocale,locale:t,async:n,activeTerminologies:this.getConfiguration().getActiveTerminologies()});if(i instanceof Promise){i=i.then(function(e){this.mResourceBundles[r]=e;return e}.bind(this))}this.mResourceBundles[r]=i}}return n?Promise.resolve(i):i};function re(e,t){v(typeof e==="string"||typeof e==="object","oDomRef must be a string or object");v(t instanceof i||o.isA(t,"sap.ui.core.Control"),"oControl must be a Control or Interface");if(t){t.placeAt(e,"only")}}g._enrichBundleConfig=function(e){if(!e.terminologies||!e.enhanceWith){var t;if(k.hasOwnProperty(e.url)){t=k[e.url]}else{t=oe(e.url)}if(t){var n=ne(t);if(n){var r=t.replace(/\./g,"/");r=r.endsWith("/")?r:r+"/";r=sap.ui.require.toUrl(r);j._processResourceConfiguration(n,{alreadyResolvedOnRoot:true,relativeTo:r});e.fallbackLocale=e.fallbackLocale||n.fallbackLocale;e.supportedLocales=e.supportedLocales||n.supportedLocales;e.terminologies=e.terminologies||n.terminologies;e.enhanceWith=e.enhanceWith||n.enhanceWith;e.activeTerminologies=e.activeTerminologies||u.getActiveTerminologies()}}}return e};q.prototype.setRoot=re;q.prototype.createUIArea=function(e){return f.create(e)};q.prototype.getUIArea=function(e){v(typeof e==="string"||typeof e==="object","o must be a string or object");var t="";if(typeof e=="string"){t=e}else{t=e.id}if(t){return f.registry.get(t)}return null};q.prototype.getUIDirty=function(){return p.getUIDirty()};q.prototype.attachUIUpdated=function(e,t){N.attachEvent(q.M_EVENTS.UIUpdated,e,t)};q.prototype.detachUIUpdated=function(e,t){N.detachEvent(q.M_EVENTS.UIUpdated,e,t)};p.attachUIUpdated(function(e){N.fireEvent(q.M_EVENTS.UIUpdated,e.getParameters())});q.prototype.notifyContentDensityChanged=function(){this._getThemeManager().then(function(e){e.notifyContentDensityChanged()})};q.prototype.attachThemeChanged=function(e,t){N.attachEvent(q.M_EVENTS.ThemeChanged,e,t)};q.prototype.detachThemeChanged=function(e,t){N.detachEvent(q.M_EVENTS.ThemeChanged,e,t)};q.prototype.fireThemeChanged=function(e){var t=q.M_EVENTS.ThemeChanged;N.fireEvent(t,e)};q.prototype.attachThemeScopingChanged=function(e,t){N.attachEvent(q.M_EVENTS.ThemeScopingChanged,e,t)};q.prototype.detachThemeScopingChanged=function(e,t){N.detachEvent(q.M_EVENTS.ThemeScopingChanged,e,t)};q.prototype.fireThemeScopingChanged=function(e){N.fireEvent(q.M_EVENTS.ThemeScopingChanged,e)};q.prototype.attachLocalizationChanged=function(e,t){N.attachEvent(q.M_EVENTS.LocalizationChanged,e,t)};q.prototype.detachLocalizationChanged=function(e,t){N.detachEvent(q.M_EVENTS.LocalizationChanged,e,t)};q.prototype.fireLocalizationChanged=function(e){var t=q.M_EVENTS.LocalizationChanged,n=jQuery.Event(t,{changes:e}),r=a._handleLocalizationChange;y.info("localization settings changed: "+Object.keys(e).join(","),null,"sap.ui.core.Core");I(this.oModels,function(e,t){if(t&&t._handleLocalizationChange){t._handleLocalizationChange()}});function i(e){f.registry.forEach(function(t){r.call(t,e)});s.registry.forEach(function(t){r.call(t,e)});c.registry.forEach(function(t){r.call(t,e)})}i.call(this,1);i.call(this,2);if(e.rtl!=undefined){document.documentElement.setAttribute("dir",e.rtl?"rtl":"ltr");this._getThemeManager().then(function(e){e._updateThemeUrls(u.getTheme())});f.registry.forEach(function(e){e.invalidate()});y.info("RTL mode "+e.rtl?"activated":"deactivated")}c.registry.forEach(function(e){e._handleEvent(n)});N.fireEvent(t,{changes:e})};q.prototype.attachLibraryChanged=function(e,t){N.attachEvent(q.M_EVENTS.LibraryChanged,e,t)};q.prototype.detachLibraryChanged=function(e,t){N.detachEvent(q.M_EVENTS.LibraryChanged,e,t)};q.prototype.fireLibraryChanged=function(e){N.fireEvent(q.M_EVENTS.LibraryChanged,e)};q.prototype.applyChanges=function(){p.renderPendingUIUpdates("forced by applyChanges")};q.prototype.registerElementClass=function(e){var t=e.getName(),n=e.getLibraryName()||"",r=this.mLibraries[n],i=e.isA("sap.ui.core.Control")?"controls":"elements";if(!r){E.create(n);r=this.mLibraries[n]={name:n,dependencies:[],types:[],interfaces:[],controls:[],elements:[]}}if(r[i].indexOf(t)<0){r[i].push(t);y.debug("Class "+e.getName()+" registered for library "+e.getLibraryName());this.fireLibraryChanged({name:e.getName(),stereotype:e.getStereotype(),operation:"add",metadata:e})}};q.prototype.registerObject=function(e){var t=e.getId(),n=e.getMetadata().getStereotype(),r=this.getObject(n,t);if(r&&r!==e){y.error('adding object "'+n+"\" with duplicate id '"+t+"'");throw new Error('Error: adding object "'+n+"\" with duplicate id '"+t+"'")}this.mObjects[n][t]=e};q.prototype.deregisterObject=function(e){var t=e.getId(),n=e.getMetadata().getStereotype();delete this.mObjects[n][t]};q.prototype.byId=c.registry.get;q.prototype.getControl=c.registry.get;q.prototype.getElementById=c.registry.get;q.prototype.getObject=function(e,t){v(t==null||typeof t==="string","sId must be a string when defined");v(this.mObjects[e]!==undefined,"sType must be a supported stereotype");return t==null?undefined:this.mObjects[e]&&this.mObjects[e][t]};q.prototype.getComponent=s.registry.get;q.prototype.getTemplate=function(e){y.warning("Synchronous loading of 'sap/ui/core/tmpl/Template'. Use 'sap/ui/core/tmpl/Template' module and"+" call Template.byId instead","SyncXHR",null,function(){return{type:"SyncXHR",name:"Core.prototype.getTemplate"}});var t=sap.ui.requireSync("sap/ui/core/tmpl/Template");return t.byId(e)};q.prototype.getStaticAreaRef=function(){return f.getStaticAreaRef()};q.prototype.isStaticAreaRef=function(e){return f.isStaticAreaRef(e)};var ie;q.prototype.attachIntervalTimer=function(e,t){y.warning("Usage of sap.ui.getCore().attachIntervalTimer() is deprecated. "+"Please use 'IntervalTrigger.addListener()' from 'sap/ui/core/IntervalTrigger' module instead.","Deprecation",null,function(){return{type:"sap.ui.core.Core",name:"Core"}});if(!ie){ie=sap.ui.require("sap/ui/core/IntervalTrigger")||sap.ui.requireSync("sap/ui/core/IntervalTrigger")}ie.addListener(e,t)};q.prototype.detachIntervalTimer=function(e,t){if(ie){ie.removeListener(e,t)}};q.prototype.attachControlEvent=function(e,t){N.attachEvent(q.M_EVENTS.ControlEvent,e,t)};q.prototype.detachControlEvent=function(e,t){N.detachEvent(q.M_EVENTS.ControlEvent,e,t)};q.prototype.fireControlEvent=function(e){N.fireEvent(q.M_EVENTS.ControlEvent,e)};q.prototype._handleControlEvent=function(e,t){var n=jQuery.Event(e.type);Object.assign(n,e);n.originalEvent=undefined;this.fireControlEvent({browserEvent:n,uiArea:t})};q.prototype.getApplication=function(){return sap.ui.getApplication&&sap.ui.getApplication()};q.prototype.registerPlugin=function(e){v(typeof e==="object","oPlugin must be an object");if(!e){return}for(var t=0,n=this.aPlugins.length;t<n;t++){if(this.aPlugins[t]===e){return}}this.aPlugins.push(e);if(this.bInitialized&&e&&e.startPlugin){e.startPlugin(this)}};q.prototype.unregisterPlugin=function(e){v(typeof e==="object","oPlugin must be an object");if(!e){return}var t=-1;for(var n=this.aPlugins.length;n--;n>=0){if(this.aPlugins[n]===e){t=n;break}}if(t==-1){return}if(this.bInitialized&&e&&e.stopPlugin){e.stopPlugin(this)}this.aPlugins.splice(t,1)};q.prototype.startPlugins=function(){for(var e=0,t=this.aPlugins.length;e<t;e++){var n=this.aPlugins[e];if(n&&n.startPlugin){n.startPlugin(this,true)}}};q.prototype.stopPlugins=function(){for(var e=0,t=this.aPlugins.length;e<t;e++){var n=this.aPlugins[e];if(n&&n.stopPlugin){n.stopPlugin(this)}}};q.prototype.setModel=function(e,t){v(e==null||o.isA(e,"sap.ui.model.Model"),"oModel must be an instance of sap.ui.model.Model, null or undefined");v(t===undefined||typeof t==="string"&&!/^(undefined|null)?$/.test(t),"sName must be a string or omitted");var n=this,r;if(!e&&this.oModels[t]){delete this.oModels[t];if(L(n.oModels)&&L(n.oBindingContexts)){r=a._oEmptyPropagatedProperties}else{r={oModels:Object.assign({},n.oModels),oBindingContexts:{},aPropagationListeners:[]}}f.registry.forEach(function(n){if(e!=n.getModel(t)){n._propagateProperties(t,n,r,false,t)}})}else if(e&&e!==this.oModels[t]){this.oModels[t]=e;f.registry.forEach(function(n){if(e!=n.getModel(t)){var r={oModels:Object.assign({},this.oModels),oBindingContexts:{},aPropagationListeners:[]};n._propagateProperties(t,n,r,false,t)}}.bind(this))}return this};q.prototype.setMessageManager=function(e){this.oMessageManager=e};q.prototype.getMessageManager=function(){if(!this.oMessageManager){this.oMessageManager=new h}return this.oMessageManager};q.prototype.byFieldGroupId=function(e){return c.registry.filter(function(t){return t.isA("sap.ui.core.Control")&&t.checkFieldGroupIds(e)})};q.prototype.getModel=function(e){v(e===undefined||typeof e==="string"&&!/^(undefined|null)?$/.test(e),"sName must be a string or omitted");return this.oModels[e]};q.prototype.hasModel=function(){return!L(this.oModels)};q.prototype.getEventBus=function(){if(!this.oEventBus){var e=sap.ui.require("sap/ui/core/EventBus");if(!e){y.warning("Synchronous loading of EventBus. Ensure that 'sap/ui/core/EventBus' module is loaded"+" before this function is called.","SyncXHR",null,function(){return{type:"SyncXHR",name:"core-eventbus"}});e=sap.ui.requireSync("sap/ui/core/EventBus")}var t=this.oEventBus=new e;this._preserveHandler=function(e){t.publish("sap.ui","__preserveContent",{domNode:e.domNode})};d.attachPreserveContent(this._preserveHandler)}return this.oEventBus};q.prototype.attachValidationError=function(e,t,n){if(typeof e==="function"){n=t;t=e;e=undefined}N.attachEvent(q.M_EVENTS.ValidationError,e,t,n);return this};q.prototype.detachValidationError=function(e,t){N.detachEvent(q.M_EVENTS.ValidationError,e,t);return this};q.prototype.attachParseError=function(e,t,n){if(typeof e==="function"){n=t;t=e;e=undefined}N.attachEvent(q.M_EVENTS.ParseError,e,t,n);return this};q.prototype.detachParseError=function(e,t){N.detachEvent(q.M_EVENTS.ParseError,e,t);return this};q.prototype.attachFormatError=function(e,t,n){if(typeof e==="function"){n=t;t=e;e=undefined}N.attachEvent(q.M_EVENTS.FormatError,e,t,n);return this};q.prototype.detachFormatError=function(e,t){N.detachEvent(q.M_EVENTS.FormatError,e,t);return this};q.prototype.attachValidationSuccess=function(e,t,n){if(typeof e==="function"){n=t;t=e;e=undefined}N.attachEvent(q.M_EVENTS.ValidationSuccess,e,t,n);return this};q.prototype.detachValidationSuccess=function(e,t){N.detachEvent(q.M_EVENTS.ValidationSuccess,e,t);return this};q.prototype.fireParseError=function(e){N.fireEvent(q.M_EVENTS.ParseError,e);return this};q.prototype.fireValidationError=function(e){N.fireEvent(q.M_EVENTS.ValidationError,e);return this};q.prototype.fireFormatError=function(e){N.fireEvent(q.M_EVENTS.FormatError,e);return this};q.prototype.fireValidationSuccess=function(e){N.fireEvent(q.M_EVENTS.ValidationSuccess,e);return this};q.prototype.isMobile=function(){return e.browser.mobile};q.prototype._getEventProvider=function(){return N};q.prototype.addPrerenderingTask=function(e,t){p.addPrerenderingTask(e,t)};q.prototype.destroy=function(){d.detachPreserveContent(this._preserveHandler);N.destroy();o.prototype.destroy.call(this)};function oe(e){if(e){var t=sap.ui.loader._.guessResourceName(e);if(t){for(var n in U){var r=n.replace(/\./g,"/");if(r!==""&&t.startsWith(r+"/")){var i=t.replace(r+"/","");var o=ne(r);if(o){var a=Y(r,"/"+o.bundleUrl);i=Y(r,"/"+i);if(i===a){k[e]=n;return n}k[e]=false}}}}}}sap.ui.setRoot=re;return(new q).getInterface()});
//# sourceMappingURL=Core.js.map