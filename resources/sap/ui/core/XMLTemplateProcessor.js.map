{"version":3,"file":"XMLTemplateProcessor.js","names":["sap","ui","define","DataType","BindingInfo","CustomData","Component","View","ViewType","XMLProcessingMode","EventHandlerResolver","ExtensionPoint","StashedControlSupport","SyncPromise","Log","ObjectPath","values","assert","LoaderExtensions","JSTokenizer","each","isEmptyObject","Configuration","parseScalarType","sType","sValue","sName","oContext","oRequireModules","oBindingInfo","parse","vValue","oType","getType","parseValue","context","locals","isValid","error","getName","Error","escape","localName","xmlNode","nodeName","XHTML_NAMESPACE","XMLNS_NAMESPACE","SVG_NAMESPACE","CORE_NAMESPACE","CORE_MVC_NAMESPACE","CUSTOM_DATA_NAMESPACE","SUPPORT_INFO_NAMESPACE","XML_COMPOSITE_NAMESPACE","UI5_INTERNAL_NAMESPACE","PREPROCESSOR_NAMESPACE_PREFIX","VIEW_SPECIAL_ATTRIBUTES","rVoidTags","getHandleChildrenStrategy","bAsync","fnCallback","syncStrategy","node","mOptions","pChild","aChildren","i","childNodes","length","push","unwrap","resolve","asyncStrategy","pChain","Promise","aChildPromises","chain","then","bind","all","XMLTemplateProcessor","loadTemplate","sTemplateName","sExtension","sResourceName","replace","loadResource","documentElement","loadTemplatePromise","async","oResult","parseViewAttributes","oView","attr","attributes","includes","name","value","enrichTemplateIds","enrichTemplateIdsPromise","parseTemplate","mSettings","parseTemplatePromise","settings","oParseConfig","vResult","isA","vContent","_isExtensionPoint","aSpliceArgs","concat","_aControls","Array","prototype","splice","apply","validateRequireContext","oRequireContext","sErrorMessage","rIdentifier","Object","keys","some","sKey","test","parseAndLoadRequireContext","sCoreContext","getAttributeNS","oModules","parseJS","e","reject","bAllLoaded","reduce","bAll","require","undefined","aLoadedModules","arguments","forEach","requireSync","fnTriggerExtensionPointProvider","oTargetControl","mAggregationsWithExtensionPoints","pProvider","aAppliedExtensionPoints","fnResolveExtensionPoints","sAggregationName","aExtensionPoints","oExtensionPoint","targetControl","fnExtClass","providerClass","applyExtensionPoint","p","ExtensionPointProvider","findNamespacePrefix","namespace","prefix","sCandidate","iCount","sRegisteredNamespace","lookupNamespaceURI","bEnrichFullIds","aResult","sInternalPrefix","pResultChain","rm","openStart","tagName","sId","voidStart","style","class","clazz","openEnd","voidEnd","text","str","unsafeHtml","close","renderControl","pContent","_sProcessingMode","debug","bDesignMode","getDesignMode","_sapui_declarativeSourceInfo","xmlRootNode","_oContainingView","isSubView","setAttributeNS","bWrapped","processNode","resolveResultPromises","vElement","spliceContentIntoResult","args","oWrapper","parentNode","removeChild","replaceChild","identity","createId","createErrorInfo","vError","getMetadata","sNodeSerialization","outerHTML","cloneNode","textContent","getId","normalizeRootNode","sNodeName","namespaceURI","ownerDocument","createElementNS","oOldParent","appendChild","sCurrentName","sViewName","_sFragmentName","oNewRoot","oTopView","iLoopCounter","createRegularControls","getClass","rootArea","rootNode","handleChildren","childNode","nodeType","createControls","findControlClass","sNamespaceURI","sLocalName","sClassName","mLibraries","getCore","getLoadedLibraries","sLibName","oLibrary","tagNames","getObjectFallback","oClassObject","get","pRequireContext","oClosestBinding","oAggregation","oConfig","bRootArea","bRootNodeInSubView","bRenderingRelevant","pResult","contentBound","bXHTML","getAttribute","aAttributes","sTextContent","document","createElement","oAttr","setAttribute","bVoid","toLowerCase","firstChild","oContent","HTMLTemplateElement","content","closestBinding","aggregation","config","aResults","acc","vControls","isArray","oControl","id","fnCreateView","oViewClass","mViewParameters","containingView","processingMode","fnScopedRunWithOwner","XMLView","createControlOrExtension","trim","oContainer","fnExtensionPointFactory","_factory","aChildControlPromises","children","oChildNode","aChildControl","aDefaultContent","aControls","sControlName","iControlNameStart","lastIndexOf","substring","sNameOrId","warning","vClass","fnClass","oClass","ns","sStyleClasses","aCustomData","mCustomSettings","sSupportData","bStashedControl","bViewRootNode","removeAttribute","oMetadata","mKnownSettings","getAllSettings","pSelfRequireContext","aRequiredModules","assign","sNamespace","oInfo","oController","objectBindings","model","mMetaContextsInfo","_calculatedModelMapping","message","metadataContexts","_preprocessMetadataContexts","indexOf","key","startsWith","visible","_iKind","type","hasOwnProperty","nodeValue","altTypes","split","filter","map","aEventHandlers","sEventHandler","vEventHandler","resolveEventHandler","_supportInfo","env","caller","info","customData","catch","oError","isEnriched","SequentialLegacy","handleChild","mAggregations","allAggregations","oNamedAggregation","fnCreateStashedControl","querySelector","oStashedNode","sControlId","createStashedControl","wrapperId","fnCreate","bPrevAsync","setUI5Attribute","path","j","aExtensionPointList","index","aggregationName","closestAggregationBindingCarrier","closestAggregationBinding","oLast","_nextSibling","multiple","template","getElementName","getDefaultAggregation","getAllAggregations","vNewControlInstance","pInstanceCreated","oOwnerComponent","getOwnerComponentFor","bIsAsyncComponent","hasAttribute","setId","fnCreateViewInstance","_sType","viewName","getComponentName","create","_create","JS","sFragmentPath","Fragment","fragmentName","load","oFragmentContent","fnCreateInstance","oInstance","applySettings","fnRunWithPreprocessor","vFinalInstance","addStyleClass","iLength","iSupportIndex","nodeid","controlid","sData","addSupportInfo","getCompositeAggregationName","aNodes","getElementsByTagName","sPrefix","sBinding","bAllowMultipleBindings","oCtx","mBinding","oBinding","checkFormatter","aFragments","formatter","parts","textFragments"],"sources":["XMLTemplateProcessor-dbg.js"],"mappings":"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"}