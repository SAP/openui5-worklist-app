/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/support/library","sap/ui/core/Element","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/ui/base/DataType"],function(e,t,i,a,n,s){"use strict";var o=t.Categories;var r=t.Severity;var d=t.Audiences;var c=function(e,t){if(e.defaultValue!==null){return e.defaultValue===t}return t===s.getType(e.type).getDefaultValue()};var u={id:"xmlViewWrongNamespace",audiences:[d.Application],categories:[o.Functionality],enabled:true,minversion:"-",title:"XML View is not configured with namespace 'sap.ui.core.mvc'",description:"For consistency and proper resource loading, the root node of an XML view must be configured with the namespace 'mvc'",resolution:"Define the XML view as '<mvc:View ...>' and configure the XML namespace as 'xmlns:mvc=\"sap.ui.core.mvc\"'",resolutionurls:[{text:"Documentation: Namespaces in XML Views",href:"https://sdk.openui5.org/topic/2421a2c9fa574b2e937461b5313671f0"}],check:function(e,t,i){var a=i.getElements().filter(function(e){return e.isA("sap.ui.core.mvc.XMLView")&&!e.isSubView()});a.forEach(function(t){if(t._xContent.namespaceURI!=="sap.ui.core.mvc"){var i=t.getViewName().split(".").pop();e.addIssue({severity:r.Medium,details:"The view '"+i+"' ("+t.getId()+") is configured with namespace '"+t._xContent.namespaceURI+"' instead of 'sap.ui.core.mvc'",context:{id:t.getId()}})}})}};var l={id:"xmlViewDefaultNamespace",audiences:[d.Control,d.Application],categories:[o.Performance],enabled:true,minversion:"-",title:"Default namespace missing in XML view",description:"If the default namespace is missing, the code is less readable and parsing performance may be slow",resolution:'Set the namespace of the control library that holds most of the controls you use as default namespace (e.g. xmlns="sap.m")',resolutionurls:[{text:"Documentation: Namespaces in XML Views",href:"https://sdk.openui5.org/topic/2421a2c9fa574b2e937461b5313671f0"}],check:function(e,t,i){var a=i.getElements().filter(function(e){return e.isA("sap.ui.core.mvc.XMLView")&&!e.isSubView()});a.forEach(function(t){if(!t._xContent.attributes.getNamedItem("xmlns")){var i=t.getViewName().split(".").pop();e.addIssue({severity:r.Low,details:"The view '"+i+"' ("+t.getId()+") does not contain a default namespace",context:{id:t.getId()}})}})}};var p={id:"xmlViewLowerCaseControl",audiences:["Control","Application"],categories:["Performance"],enabled:true,minversion:"-",title:"Control tag in XML view starts with lower case",description:"Control tags with lower case cannot be loaded in Linux-based systems",resolution:"Start the Control tag with upper case",resolutionurls:[{text:"Documentation: SAPUI5 Control Development Guidelines",href:"https://sdk.openui5.org/topic/4549da61e2d949d6a3d20ad8a9d17a6f"}],check:function(t,i,a){var n=e.getLogEntries().filter(function(e){return e.component==="sap.ui.core.XMLTemplateProcessor#lowerCase"});n.forEach(function(e){t.addIssue({severity:r.High,details:e.message,context:{id:e.details}})})}};var m={id:"xmlViewUnusedNamespaces",audiences:[d.Control,d.Application],categories:[o.Usability],enabled:true,minversion:"-",title:"Unused namespaces in XML view",description:"Namespaces that are declared but not used may confuse readers of the code",resolution:"Remove the unused namespaces from the view definition",resolutionurls:[{text:"Documentation: Namespaces in XML Views",href:"https://sdk.openui5.org/topic/2421a2c9fa574b2e937461b5313671f0"}],check:function(e,t,i){var n=i.getElements().filter(function(e){return e.isA("sap.ui.core.mvc.XMLView")});n.forEach(function(t){for(var i=0;i<t._xContent.attributes.length;i++){var n=t._xContent.attributes.item(i).name;var s=t._xContent.attributes.item(i).localName;var o=t._xContent.attributes.item(i).value;if(n.match("xmlns:")&&s!=="xmlns:support"&&s!=="mvc"&&o.indexOf("schemas.sap.com")<0){var d=a(t._xContent)[0].outerHTML;if(!d.match("<"+s+":")&&!d.match(" "+s+":")){var c=t.getViewName().split(".").pop();e.addIssue({severity:r.Medium,details:"View '"+c+"' ("+t.getId()+") contains an unused XML namespace '"+s+"' referencing library '"+o+"'",context:{id:t.getId()}})}}}})}};var f={id:"deprecatedProperty",audiences:[d.Application],categories:[o.Functionality],enabled:true,minversion:"1.38",title:"Control is using deprecated property",description:"Using deprecated properties should be avoided, because they are not maintained anymore",resolution:"Refer to the API of the element which property should be used instead.",resolutionurls:[{text:"API Reference",href:"https://sdk.openui5.org/api/deprecated"}],check:function(e,t,a){a.getElementsByClassName(i).forEach(function(t){var i=t.getMetadata(),a=i.getAllProperties();for(var n in a){if(a[n].deprecated&&!c(a[n],t.getProperty(n))){e.addIssue({severity:r.Medium,details:"Deprecated property '"+n+"' is used for element '"+t.getId()+"'. Default value: '"+a[n].defaultValue+"' and current value: '"+t.getProperty(n)+"'",context:{id:t.getId()}})}}})}};var g={id:"deprecatedElement",audiences:[d.Application],categories:[o.Functionality],enabled:true,minversion:"1.38",title:"Usage of deprecated element",description:"Using deprecated controls should be avoided, because they are not maintained anymore",resolution:"Refer to the API of the element which element should be used instead.",resolutionurls:[{text:"API Reference",href:"https://sdk.openui5.org/api/deprecated"}],check:function(e,t,a){a.getElementsByClassName(i).forEach(function(t){var i=t.getMetadata();if(i.isDeprecated()){e.addIssue({severity:r.Medium,details:"Deprecated element '"+t.getId()+"' is used.",context:{id:t.getId()}})}})}};var h={id:"deprecatedAggregation",audiences:[d.Application],categories:[o.Functionality],enabled:true,minversion:"1.38",title:"Control is using deprecated aggregation",description:"Using deprecated aggregation should be avoided, because they are not maintained anymore",resolution:"Refer to the API of the element which aggregation should be used instead.",resolutionurls:[{text:"API Reference",href:"https://sdk.openui5.org/api/deprecated"}],check:function(e,t,a){a.getElementsByClassName(i).forEach(function(t){var i=t.getMetadata(),a=i.getAllAggregations();for(var s in a){if(a[s].deprecated&&!n(t.getAggregation(s))){e.addIssue({severity:r.Medium,details:"Deprecated aggregation '"+s+"' is used for element '"+t.getId()+"'.",context:{id:t.getId()}})}}})}};var v={id:"deprecatedAssociation",audiences:[d.Application],categories:[o.Functionality],enabled:true,minversion:"1.38",title:"Control is using deprecated association",description:"Using deprecated association should be avoided, because they are not maintained anymore",resolution:"Refer to the API of the element which association should be used instead.",resolutionurls:[{text:"API Reference",href:"https://sdk.openui5.org/api/deprecated"}],check:function(e,t,a){a.getElementsByClassName(i).forEach(function(t){var i=t.getMetadata(),a=i.getAllAssociations();for(var s in a){if(a[s].deprecated&&!n(t.getAssociation(s))){e.addIssue({severity:r.Medium,details:"Deprecated association '"+s+"' is used for element '"+t.getId()+"'.",context:{id:t.getId()}})}}})}};var y={id:"deprecatedEvent",audiences:[d.Application],categories:[o.Functionality],enabled:true,minversion:"1.38",title:"Control is using deprecated event",description:"Using deprecated event should be avoided, because they are not maintained anymore",resolution:"Refer to the API of the element which event should be used instead.",resolutionurls:[{text:"API Reference",href:"https://sdk.openui5.org/api/deprecated"}],check:function(e,t,a){a.getElementsByClassName(i).forEach(function(t){var i=t.getMetadata(),a=i.getAllEvents();for(var n in a){if(a[n].deprecated&&t.mEventRegistry[n]&&t.mEventRegistry[n].length>0){e.addIssue({severity:r.Medium,details:"Deprecated event '"+n+"' is used for element '"+t.getId()+"'.",context:{id:t.getId()}})}}})}};return[u,l,p,m,f,g,h,v,y]},true);