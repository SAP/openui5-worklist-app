/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define("sap/ui/debug/PropertyList",["sap/ui/base/DataType","sap/ui/base/EventProvider","sap/ui/core/Element","sap/ui/core/ElementMetadata","sap/base/util/isEmptyObject","sap/base/security/encodeXML"],function(e,t,a,s,n,o){"use strict";var i=t.extend("sap.ui.debug.PropertyList",{constructor:function(e,a,s){t.apply(this,arguments);this.oWindow=a;this.oParentDomRef=s;this.oCore=e;var n=window.top.document.createElement("link");n.rel="stylesheet";n.href=window.top.sap.ui.require.toUrl("sap/ui/debug/PropertyList.css");window.top.document.head.appendChild(n);this.onchange=i.prototype.onchange.bind(this);s.addEventListener("change",this.onchange);this.onfocus=i.prototype.onfocus.bind(this);s.addEventListener("focusin",this.onfocus);this.onkeydown=i.prototype.onkeydown.bind(this);s.addEventListener("keydown",this.onkeydown)}});i.prototype.exit=function(){this.oParentDomRef.removeEventListener("change",this.onchange);this.oParentDomRef.removeEventListener("focusin",this.onfocus);this.oParentDomRef.removeEventListener("keydown",this.onkeydown)};i.prototype.update=function(e){var t=this.sControlId=e.getParameter("controlId");this.oParentDomRef.innerHTML="";var a=this.oCore.byId(t);if(!a){this.oParentDomRef.innerHTML="Please select a valid control";return}var o=a.getMetadata(),i=[];i.push("Type : "+o.getName()+"<br >");i.push("Id : "+a.getId()+"<br >");i.push("<div class='sapDbgSeparator'>&nbsp;</div>");i.push("<table class='sapDbgPropertyList' cellspacing='1'><tbody>");while(o instanceof s){var r=this.getPropertyLikeSettings(o);if(!n(r)){if(o!==a.getMetadata()){i.push("<tr><td class='sapDbgPLSubheader' colspan=\"2\">BaseType: ");i.push(o.getName());i.push("</td></tr>")}this.renderSettings(i,a,r)}o=o.getParent()}i.push("</tbody></table>");this.oParentDomRef.innerHTML=i.join("");this.mHelpDocs={}};i.prototype.getPropertyLikeSettings=function(t){var a={};Object.values(t.getProperties()).forEach(function(e){a[e.name]=e});Object.values(t.getAggregations()).forEach(function(t){if(t.multiple===false&&t.altTypes&&t.altTypes.length&&e.getType(t.altTypes[0])!=null){a[t.name]=t}});return a};i.prototype.renderSettings=function(t,s,n){Object.values(n).forEach(function(n){var i=n.name,r=n.get(s),p=n.multiple===false?e.getType(n.altTypes[0]):n.getType();t.push("<tr><td>");t.push(i);t.push("</td><td>");var u="";if(p.getPrimitiveType().getName()==="boolean"){t.push("<input type='checkbox' data-name='"+i+"' ");if(r==true){t.push("checked='checked'")}t.push(">")}else if(p.isEnumType()){var l=p.getEnumValues();t.push("<select data-name='"+i+"'>");for(var h in l){t.push("<option ");if(h===r){t.push(" selected ")}t.push("value='"+o(h)+"'>");t.push(o(h));t.push("</option>")}t.push("</select>")}else{var c="";if(r===null){c="class='sapDbgComplexValue'";r="(null)"}else if(r instanceof a){c="class='sapDbgComplexValue'";if(Array.isArray(r)){r=r.join(", ")}else{r=String(r)}u=' title="This aggregation currently references an Element. You can set a '+p.getName()+' value instead"'}t.push("<input type='text' "+c+" value='"+o(""+r)+"'"+u+" data-name='"+i+"'>")}t.push("</td></tr>")})};i.prototype.onkeydown=function(e){var t=e.target;if(e.keyCode==13&&t.tagName==="INPUT"&&t.type==="text"){this.applyChange(t)}};i.prototype.onchange=function(e){var t=e.target;if(t.tagName==="SELECT"||t.tagName==="INPUT"){this.applyChange(t)}};i.prototype.onfocus=function(e){var t=e.target;if(t.tagName==="INPUT"&&t.dataset.name){if(t.style.color==="#a5a5a5"){t.style.color="";t.value=""}}};i.prototype.applyChange=function(t){var a=this.oCore.byId(this.sControlId),s=t.dataset.name,n=a.getMetadata().getPropertyLikeSetting(s);if(n){var o=t.type==="checkbox"?String(t.checked):t.value,i=n.multiple!=null?e.getType(n.altTypes[0]):n.getType();if(i){var r=i.parseValue(o);if(i.isValid(r)&&r!=="(null)"){n.set(a,r);t.classList.remove("sapDbgComplexValue")}}}};return i});
//# sourceMappingURL=PropertyList.js.map