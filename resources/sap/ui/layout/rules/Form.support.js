/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/support/library","sap/ui/layout/library"],function(e,t){"use strict";var o=e.Categories;var a=e.Severity;var r=e.Audiences;var i=t.form.SimpleFormLayout;function s(e){if(e&&e.isA("sap.ui.layout.form.SimpleForm")){return true}return false}function n(e){if(e&&(e.isA("sap.ui.comp.smartform.SmartForm")||e.isA("sap.m.Panel")&&e.getParent().isA("sap.ui.comp.smartform.SmartForm"))){return true}return false}var l={id:"formResponsiveLayout",audiences:[r.Control],categories:[o.Functionality],enabled:true,minversion:"1.48",title:"Form: Use of ResponsiveLayout",description:"ResponsiveLayout should not be used any longer because of UX requirements",resolution:"Use the ResponsiveGridLayout or ColumnLayout instead",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"},{text:"API Reference: ResponsiveGridLayout",href:"https://sdk.openui5.org/api/sap.ui.layout.form.ResponsiveGridLayout"},{text:"API Reference: ColumnLayout",href:"https://sdk.openui5.org/api/sap.ui.layout.form.ColumnLayout"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getLayout();if(o&&o.isA("sap.ui.layout.form.ResponsiveLayout")){var r=t.getParent();var i;var l="Form";if(s(r)){i=r.getId();l="SimpleForm"}else if(n(r)){return}else{i=t.getId()}e.addIssue({severity:a.Medium,details:l+" "+i+" uses ResponsiveLayout.",context:{id:i}})}})}};function u(e,t,o){var r=e.getTitle();var i=e.getToolbar();if(r&&i){var s=e.getId();o.addIssue({severity:a.Medium,details:t+" "+s+" has Title and Toolbar assigned.",context:{id:s}})}}var m={id:"formTitleAndToolbar",audiences:[r.Application],categories:[o.Functionality],enabled:true,minversion:"1.48",title:"Form: Title and Toolbar at same time",description:"A Form or FormContainer can only have a Title or a Toolbar assigned, not both",resolution:"Use either Title or a Toolbar",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"},{text:"API Reference: FormContainer",href:"https://sdk.openui5.org/api/sap.ui.layout.form.FormContainer"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getParent();if(s(o)){return}u(t,"Form",e)});o.getElementsByClassName("sap.ui.layout.form.FormContainer").forEach(function(t){u(t,"FormContainer",e)});o.getElementsByClassName("sap.ui.layout.form.SimpleForm").forEach(function(t){u(t,"SimpleForm",e)})}};var p={id:"formTitleOrAriaLabel",audiences:[r.Application],categories:[o.Accessibility],enabled:true,minversion:"1.48",title:"Form: Container must have a Title",description:"A FormContainer must have some Title information."+"\n This can be a Title on the FormContainer or some Title assigned via AriaLabelledBy."+"\n If no Title is assigned to the FormContainer there must be at least a Title set"+" on the Form or assigned via AriaLabelledBy on the Form.",resolution:"Set a Title on Form or FormContainer or assign it via AriaLabelledBy",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"},{text:"API Reference: FormContainer",href:"https://sdk.openui5.org/api/sap.ui.layout.form.FormContainer"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.FormContainer").forEach(function(t){var o=t.getParent();if(!o){return}var r=o.getParent();var i;var l="Form";if(s(r)){i=r.getId();l="SimpleForm"}else if(n(r)){return}else{i=o.getId()}if(!t.getTitle()&&t.getAriaLabelledBy().length==0&&!o.getTitle()&&o.getAriaLabelledBy().length==0){e.addIssue({severity:a.High,details:"In "+l+" "+i+", FormContainer"+t.getId()+" has no Title assigned.",context:{id:t.getId()}})}})}};function f(e,t,o){var r=e.getId();if(!e.isA("sap.ui.core.IFormContent")){o.addIssue({severity:a.High,details:e.getMetadata().getName()+" "+r+" is not allowed as "+t+" content.",context:{id:r}})}}var d={id:"formAllowedContent",audiences:[r.Application],categories:[o.Usability],enabled:true,minversion:"1.48",title:"Form: Content not allowed",description:"It is not allowed to use any layout as content of a Form or nest Forms"+" This leads to issues with screen reader support, keyboard support and field alignment."+"\nIt is also not supported to use other unsupported controls as content of the Form"+" as it is not sure this controls will meet the alingment and intartaction requirements of the Form.",resolution:"Use only labels and controls implementing interface sap.ui.core.IFormContent as content of a Form",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"},{text:"API Reference: FormElement",href:"https://sdk.openui5.org/api/sap.ui.layout.form.FormElement"},{text:"API Reference: IFormContent",href:"https://sdk.openui5.org/api/sap.ui.core.IFormContent"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getParent();if(s(o)||n(o)){return}else{var a=t.getFormContainers();for(var r=0;r<a.length;r++){var i=a[r];var l=i.getFormElements();for(var u=0;u<l.length;u++){var m=l[u];var p=m.getFields();for(var d=0;d<p.length;d++){var c=p[d];f(c,"Form",e)}}}}});o.getElementsByClassName("sap.ui.layout.form.SimpleForm").forEach(function(t){var o=t.getContent();for(var a=0;a<o.length;a++){var r=o[a];if(!r.isA(["sap.ui.core.Title","sap.ui.core.Toolbar","sap.ui.core.Label"])){f(r,"SimpleForm",e)}}});o.getElementsByClassName("sap.ui.comp.smartform.SmartForm").forEach(function(t){var o=t.getGroups();for(var a=0;a<o.length;a++){var r=o[a];var i=r.getGroupElements();for(var s=0;s<i.length;s++){var n=i[s];var l=n.getElements();for(var u=0;u<l.length;u++){var m=l[u];f(m,"SmartForm",e)}}}})}};function c(e,t,o){var r=e.getToolbar();if(r){var i=e.getId();var s=e.getAriaLabelledBy();var n;if(r.getContent){n=r.getContent()}else if(r.getItems){n=r.getItems()}for(var l=0;l<n.length;l++){var u=n[l];if(u.isA(["sap.ui.core.Title","sap.m.Title"])){var m=false;for(var p=0;p<s.length;p++){var f=s[p];if(u.getId()==f){m=true;break}}if(!m){o.addIssue({severity:a.Medium,details:"in"+t+" "+i+" AriaLabelledBy for Title in Toolbar is missing.",context:{id:i}})}}}}}var g={id:"formTitleInToolbarAria",audiences:[r.Application],categories:[o.Accessibility],enabled:true,minversion:"1.48",title:"Form: Title in Toolbar needs to be set to AriaLabelledBy",description:"If a Toolbar is used in a Form or FormContainer and the Toolbar has a Title inside"+" it must be set to AriaLabelledBy to enable screen reader support",resolution:"Set the Title used inside the Toolbar to AriaLabelledBy of the Form or FormContainer.",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"},{text:"API Reference: FormContainer",href:"https://sdk.openui5.org/api/sap.ui.layout.form.FormContainer"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getParent();if(s(o)){return}c(t,"Form",e)});o.getElementsByClassName("sap.ui.layout.form.FormContainer").forEach(function(t){var o=t.getParent().getParent();if(s(o)){return}c(t,"FormContainer",e)});o.getElementsByClassName("sap.ui.layout.form.SimpleForm").forEach(function(t){c(t,"SimpleForm",e)})}};var y={id:"formPropertiesOfOtherLayout",audiences:[r.Application],categories:[o.Consistency],enabled:true,minversion:"1.48",title:"SimpleForm: Properties not valid for layout",description:"Some properties of SimpleForm are only valid for a special layout."+" If they are used with a different layout they have no effect.",resolution:"Use only properties that are valid for the layout used",resolutionurls:[{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.SimpleForm").forEach(function(t){var o=t.getId();var r=t.getLayout();var s=[];var n=function(e){if(!t.isPropertyInitial(e)){s.push(e)}};if(r!=i.ResponsiveGridLayout&&r!=i.ColumnLayout){n("labelSpanL");n("emptySpanL");n("columnsXL");n("columnsL");n("columnsM")}if(r!=i.ResponsiveGridLayout){n("labelSpanXL");n("labelSpanM");n("labelSpanS");n("adjustLabelSpan");n("emptySpanXL");n("emptySpanM");n("emptySpanS");n("singleContainerFullSize");n("breakpointXL");n("breakpointL");n("breakpointM")}if(r!=i.ResponsiveLayout){n("minWidth");n("labelMinWidth")}if(r==i.ResponsiveGridLayout){n("maxContainerCols")}for(var l=0;l<s.length;l++){e.addIssue({severity:a.Low,details:"SimpleForm "+o+" with Layout "+r+" doesn't support use of property "+s[l]+".",context:{id:o}})}})}};var h={id:"formEditableContent",audiences:[r.Application],categories:[o.Usability],enabled:true,minversion:"1.48",title:"Form: Editable content must match editable property",description:"The editable property of the Form is used to align the Labels and add screen reader information. If editable controls are used in Form, the property must be set, otherwise it should not be set.",resolution:"Set the editable property according to the content of the Form.",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"},{text:"API Reference: FormElement",href:"https://sdk.openui5.org/api/sap.ui.layout.form.FormElement"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getEditable();var r=t.getParent();var i=r?r.getMetadata():undefined;var l;var u="Form";if(s(r)){l=r.getId();u="SimpleForm"}else if(n(r)){return}else{l=t.getId()}var m=false;var p=false;var f=t.getFormContainers();for(var d=0;d<f.length;d++){var c=f[d];var g=c.getFormElements();for(var y=0;y<g.length;y++){var h=g[y];var v=h.getFields();for(var F=0;F<v.length;F++){var b=v[F];i=b.getMetadata();if(o){if(b.isA("sap.ui.core.Icon")||i.hasProperty("displayOnly")&&b.getDisplayOnly()){m=true;break}}if(b.isA("sap.m.InputBase")||b.isA("sap.m.Select")||b.isA("sap.m.CheckBox")||b.isA("sap.m.RadioButton")||b.isA("sap.m.RadioButtonGroup")||b.isA("sap.m.Button")&&h.getLabel()||b.isA("sap.m.Slider")||b.isA("sap.m.Switch")||i.hasProperty("displayOnly")&&!b.getDisplayOnly()){p=true;if(!o){m=true;break}}}if(m){break}}if(!m&&o&&!p){m=true}}if(m){if(o){e.addIssue({severity:a.High,details:u+" "+l+" is set to editable but has only non-editable content.",context:{id:l}})}else{e.addIssue({severity:a.High,details:u+" "+l+" is set to non-editable but has editable content.",context:{id:l}})}}})}};function v(e,t,o,r,i,s){var n=r.getMetadata().getName();var l=i.getMetadata().getName();var u=e.getMetadata().getName();var m=e.getId();var p=false;var f=false;switch(n){case"sap.ui.layout.form.ResponsiveGridLayout":if(l!="sap.ui.layout.GridData"){p=true}else if(u=="sap.ui.layout.form.FormElement"){f=true}break;case"sap.ui.layout.form.ResponsiveLayout":if(l!="sap.ui.layout.ResponsiveFlowLayoutData"){p=true}break;case"sap.ui.layout.form.GridLayout":if(l!="sap.ui.layout.form.GridElementData"){if(!(u=="sap.ui.layout.form.FormContainer"&&l=="sap.ui.layout.form.GridContainerData")){p=true}}else if(u=="sap.ui.layout.form.FormElement"){f=true}break;case"sap.ui.layout.form.ColumnLayout":if(l!="sap.ui.layout.form.ColumnElementData"){if(!(u=="sap.ui.layout.form.FormContainer"&&l=="sap.ui.layout.form.ColumnContainerData")){p=true}}else if(u=="sap.ui.layout.form.FormElement"||u=="sap.ui.layout.form.FormContainer"){f=true}break;default:break}if(p){s.addIssue({severity:a.Low,details:t+" "+o+" uses "+n+", therefore "+l+" is not supported on "+u+" "+m+".",context:{id:m}})}if(f){s.addIssue({severity:a.Low,details:t+" "+o+" uses "+n+", but "+l+" is not supported on "+u+" "+m+".",context:{id:m}})}}function F(e,t,o,a,r){var i=e.getLayoutData();if(i){if(i.isA("sap.ui.core.VariantLayoutData")){var s=i.getMultipleLayoutData();for(var n=0;n<s.length;n++){i=s[n];v(e,t,o,a,i,r)}}else{v(e,t,o,a,i,r)}}}var b={id:"formWrongLayoutData",audiences:[r.Application],categories:[o.Consistency],enabled:true,minversion:"1.48",title:"Form: LayoutData assigned to Form content not valid for layout",description:"Layout data on Form content can be used to influence the appearance of Form. Depending on the layout used, different LayoutData can be used.",resolution:"Use only valid LayoutData that are suitable for the layout used",resolutionurls:[{text:"API Reference: ResponsiveGridLayout",href:"https://sdk.openui5.org/api/sap.ui.layout.form.ResponsiveGridLayout"},{text:"API Reference: ResponsiveLayout",href:"https://sdk.openui5.org/api/sap.ui.layout.form.ResponsiveLayout"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getLayout();var a=t.getParent();var r;var i="Form";if(s(a)){r=a.getId();i="SimpleForm"}else if(n(a)){r=a.getId();i="SmartForm"}else{r=t.getId()}var l=t.getFormContainers();for(var u=0;u<l.length;u++){var m=l[u];var p=m.getFormElements();F(m,i,r,o,e);for(var f=0;f<p.length;f++){var d=p[f];var c=d.getFields();F(d,i,r,o,e);for(var g=0;g<c.length;g++){var y=c[g];F(y,i,r,o,e)}}}})}};var L={id:"formMissingLabel",audiences:[r.Application],categories:[o.Accessibility],enabled:true,minversion:"1.48",title:"Form: Label for Form content missing",description:"For accessibility reasons, each field must have a label."+" \n If Label is assigned to FormElement, it will be automatically assigned to the corresponding fields."+" \n But if no Label is assigned to FormElement, the application must use the ariaLabelledBy property of the field to assign a label.",resolution:"Assign a label to the field",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"},{text:"API Reference: FormElement",href:"https://sdk.openui5.org/api/sap.ui.layout.form.FormElement"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getParent();var r=o?o.getMetadata():undefined;var i;var l="Form";if(s(o)){i=o.getId();l="SimpleForm"}else if(n(o)){return}else{i=t.getId()}var u=t.getFormContainers();for(var m=0;m<u.length;m++){var p=u[m];if(p.getVisible()&&p.getExpanded()){var f=p.getFormElements();for(var d=0;d<f.length;d++){var c=f[d];var g=c.getLabel();if(!g&&c.getVisible()){var y=c.getFields();for(var h=0;h<y.length;h++){var v=y[h];var F=v.getId();r=v.getMetadata();if(r.getAssociation("ariaLabelledBy")&&(!v.getAriaLabelledBy()||v.getAriaLabelledBy().length==0)&&!v.isA("sap.m.Button")&&!(v.isA("sap.m.CheckBox")&&v.getText())&&!(v.isA("sap.m.RadioButton")&&v.getText())){e.addIssue({severity:a.High,details:"In "+l+" "+i+", no label has been assigned to field "+r.getName()+" "+F+".",context:{id:F}})}}}}}}})}};var I={id:"formLabelAsField",audiences:[r.Application],categories:[o.Usability],enabled:true,minversion:"1.48",title:"Form: Label is used as field",description:"FormElements can have Labels and Fields."+" \n Depending on the layout used and device and screen sizes, the way labels and fields are shown might differ."+" \n If labels are used as fields, this will lead to misaligned fields and labels in the Form and might have an effect on the screen reader support.",resolution:"Use Labels only in the Label aggregation",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: FormElement",href:"https://sdk.openui5.org/api/sap.ui.layout.form.FormElement"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getParent();var r=o?o.getMetadata():undefined;var i;var l="Form";if(s(o)){return}else if(n(o)){i=o.getId();l="SmartForm"}else{i=t.getId()}var u=t.getFormContainers();for(var m=0;m<u.length;m++){var p=u[m];var f=p.getFormElements();for(var d=0;d<f.length;d++){var c=f[d];var g=c.getFields();for(var y=0;y<g.length;y++){var h=g[y];var v=h.getId();r=h.getMetadata();if(r.isInstanceOf("sap.ui.core.Label")){e.addIssue({severity:a.High,details:l+" "+i+": "+r.getName()+" "+v+" is used as field.",context:{id:v}})}}}}})}};var A={id:"formGridLayout",audiences:[r.Control],categories:[o.Functionality],enabled:true,minversion:"1.65",title:"Form: Use of GridLayout",description:"GridLayout should not be used any longer because of UX requirements",resolution:"Use the ResponsiveGridLayout or ColumnLayout instead",resolutionurls:[{text:"API Reference: Form",href:"https://sdk.openui5.org/api/sap.ui.layout.form.Form"},{text:"API Reference: SimpleForm",href:"https://sdk.openui5.org/api/sap.ui.layout.form.SimpleForm"},{text:"API Reference: ResponsiveGridLayout",href:"https://sdk.openui5.org/api/sap.ui.layout.form.ResponsiveGridLayout"},{text:"API Reference: ColumnLayout",href:"https://sdk.openui5.org/api/sap.ui.layout.form.ColumnLayout"}],check:function(e,t,o){o.getElementsByClassName("sap.ui.layout.form.Form").forEach(function(t){var o=t.getLayout();var r=sap.ui.getCore().getLoadedLibraries();if(o&&o.isA("sap.ui.layout.form.ColumnLayout")&&!r.hasOwnProperty("sap.ui.commons")){var i=t.getParent();var l;var u="Form";if(s(i)){l=i.getId();u="SimpleForm"}else if(n(i)){return}else{l=t.getId()}e.addIssue({severity:a.Medium,details:u+" "+l+" uses GridLayout.",context:{id:l}})}})}};return[l,m,p,d,g,y,h,b,L,I,A]},true);