(function(e){e.mobiscroll.classes.Scroller=function(f,p){var T,k,M,W,D,A,S,V,O,L,q,I,P,U,H,j,F,R,Y,_,z,K,X,B,E,Q,$,G,J,N,Z,ee,te,ie,ne,ae=this,se=f,le=e(se),oe=b({},C),de={},re={},fe={},ue={},ce=[],we=[],he=le.is("input"),ve=false,pe=function(t){if(v(t)&&!s&&!H&&!ne&&!Me(this)){t.preventDefault();s=true;F=oe.mode!="clickpick";Q=e(".dw-ul",this);De(Q);R=re[$]!==undefined;K=R?Ve(Q):fe[$];Y=h(t,"Y");_=new Date;z=Y;Le(Q,$,K,.001);if(F){Q.closest(".dwwl").addClass("dwa")}e(document).on(x,me).on(g,be)}},me=function(e){if(F){e.preventDefault();e.stopPropagation();z=h(e,"Y");Le(Q,$,i(K+(Y-z)/k,X-1,B+1))}if(Y!==z){R=true}},be=function(t){var n=new Date-_,a=i(K+(Y-z)/k,X-1,B+1),l,o,d,r=Q.offset().top;if(n<300){l=(z-Y)/n;o=l*l/oe.speedUnit;if(z-Y<0){o=-o}}else{o=z-Y}d=Math.round(K-o/k);if(!o&&!R){var f=Math.floor((z-r)/k),u=e(e(".dw-li",Q)[f]),c=F;if(Pe("onValueTap",[u])!==false){d=f}else{c=true}if(c){u.addClass("dw-hl");setTimeout(function(){u.removeClass("dw-hl")},200)}}if(F){Ue(Q,d,0,true,Math.round(a))}s=false;Q=null;e(document).off(x,me).off(g,be)},ye=function(t){if(ne){ne.removeClass("dwb-a")}ne=e(this);e(document).on(g,xe);if(!ne.hasClass("dwb-d")&&!ne.hasClass("dwb-nhl")){ne.addClass("dwb-a")}if(ne.hasClass("dwwb")){if(v(t)){ke(t,ne.closest(".dwwl"),ne.hasClass("dwwbp")?He:je)}}},xe=function(t){if(H){clearInterval(G);H=false}if(ne){ne.removeClass("dwb-a");ne=null}e(document).off(g,xe)},ge=function(t){if(t.which==38&&!t.altKey){ke(t,e(this),je)}else if(t.which==40&&!t.altKey){ke(t,e(this),He)}else if(t.which==33){ke(t,e(this),Fe)}else if(t.which==34){ke(t,e(this),Re)}},Ce=function(e){if(H){clearInterval(G);H=false}},Te=function(t){if(!Me(this)){t.preventDefault();t=t.originalEvent||t;var i=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,n=e(".dw-ul",this);De(n);Ue(n,Math.round(fe[$]-i),i<0?1:2)}};function ke(e,t,i){e.stopPropagation();e.preventDefault();if(!H&&!Me(t)&&!t.hasClass("dwa")){H=true;var n=t.find(".dw-ul");De(n);clearInterval(G);G=setInterval(function(){i(n)},oe.delay);i(n)}}function Me(t){if(e.isArray(oe.readonly)){var i=e(".dwwl",W).index(t);return oe.readonly[i]}return oe.readonly}function We(t){var i='<div class="dw-bf">',a=ce[t],s=a.values?a:n(a),l=1,o=s.labels||[],d=s.values,r=s.keys||d;e.each(d,function(e,t){if(l%20==0){i+='</div><div class="dw-bf">'}i+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+r[e]+'"'+(o[e]?' aria-label="'+o[e]+'"':"")+' style="height:'+k+"px;line-height:"+k+'px;"><div class="dw-i">'+t+"</div></div>";l++});i+="</div>";return i}function De(t){X=e(".dw-li",t).index(e(".dw-v",t).eq(0));B=e(".dw-li",t).index(e(".dw-v",t).eq(-1));$=e(".dw-ul",W).index(t)}function Ae(e){var t=oe.headerText;return t?typeof t==="function"?t.call(se,e):t.replace(/\{value\}/i,e):""}function Se(){ae.temp=ae.values?ae.values.slice(0):oe.parseValue(le.val()||"",ae);Ye()}function Ve(t){var i=window.getComputedStyle?getComputedStyle(t[0]):t[0].style,n,a;if(w){e.each(["t","webkitT","MozT","OT","msT"],function(e,t){if(i[t+"ransform"]!==undefined){n=i[t+"ransform"];return false}});n=n.split(")")[0].split(", ");a=n[13]||n[5]}else{a=i.top.replace("px","")}return Math.round(T-a/k)}function Oe(e,t){clearTimeout(re[t]);delete re[t];e.closest(".dwwl").removeClass("dwa")}function Le(e,t,i,n,a){var s=(T-i)*k,l=e[0].style,o;if(s==ue[t]&&re[t]){return}if(n&&s!=ue[t]){Pe("onAnimStart",[W,t,n])}ue[t]=s;l[c+"Transition"]="all "+(n?n.toFixed(3):0)+"s ease-out";if(w){l[c+"Transform"]="translate3d(0,"+s+"px,0)"}else{l.top=s+"px"}if(re[t]){Oe(e,t)}if(n&&a){e.closest(".dwwl").addClass("dwa");re[t]=setTimeout(function(){Oe(e,t)},n*1e3)}fe[t]=i}function qe(t,i,n){var a=e('.dw-li[data-val="'+t+'"]',i),s=e(".dw-li",i),l=s.index(a),o=s.length;if(!a.hasClass("dw-v")){var d=a,r=a,f=0,u=0;while(l-f>=0&&!d.hasClass("dw-v")){f++;d=s.eq(l-f)}while(l+u<o&&!r.hasClass("dw-v")){u++;r=s.eq(l+u)}if((u<f&&u&&n!==2||!f||l-f<0||n==1)&&r.hasClass("dw-v")){a=r;l=l+u}else{a=d;l=l-f}}return{cell:a,v:l,val:a.attr("data-val")}}function Ie(t,i,n,a,s){if(Pe("validate",[W,i,t,a])!==false){e(".dw-ul",W).each(function(n){var l=e(this),o=n==i||i===undefined,d=qe(ae.temp[n],l,a),r=d.cell;if(!r.hasClass("dw-sel")||o){ae.temp[n]=d.val;if(!oe.multiple){e(".dw-sel",l).removeAttr("aria-selected");r.attr("aria-selected","true")}e(".dw-sel",l).removeClass("dw-sel");r.addClass("dw-sel");Le(l,n,d.v,o?t:.1,o?s:false)}});M=oe.formatResult(ae.temp);if(ae.live){Ye(n,n,0,true)}e(".dwv",W).html(Ae(M));if(n){Pe("onChange",[M])}}}function Pe(t,i){var n;i.push(ae);e.each([P,de,p],function(e,a){if(a&&a[t]){n=a[t].apply(se,i)}});return n}function Ue(t,n,a,s,l){n=i(n,X,B);var o=e(".dw-li",t).eq(n),d=l===undefined?n:l,r=l!==undefined,f=$,u=s?n==d?.1:Math.abs((n-d)*oe.timeUnit):0;ae.temp[f]=o.attr("data-val");Le(t,f,n,u,r);setTimeout(function(){Ie(u,f,true,a,r)},10)}function He(e){var t=fe[$]+1;Ue(e,t>B?X:t,1,true)}function je(e){var t=fe[$]-1;Ue(e,t<X?B:t,2,true)}function Fe(e){Ue(e,X,2,true)}function Re(e){Ue(e,B,2,true)}function Ye(e,t,i,n,a,s){if(ve&&!n){Ie(i,undefined,s)}M=oe.formatResult(ae.temp);if(!a){ae.values=ae.temp.slice(0);ae.val=M}if(e){if(he){le.val(M);if(t){N=true;le.change()}}Pe("onValueFill",[M,t])}}function _e(e,t){var i;ee.on(e,function(e){clearTimeout(i);i=setTimeout(function(){if(q&&t||!t){ae.position(!t)}},200)})}ae.position=function(t){var n=W.width(),a=ee[0].innerHeight||ee.innerHeight();if(!(S===n&&V===a&&t)&&!Z&&Pe("onPosition",[W,n,a])!==false&&E){var s,l,o,d,r,f,u,c,w,h,v,p,m,b=0,y=0,x=ee.scrollLeft(),g=ee.scrollTop(),C=e(".dwwr",W),T=e(".dw",W),k={},M=oe.anchor===undefined?le:oe.anchor;if(/modal|bubble/.test(oe.display)){e(".dwc",W).each(function(){s=e(this).outerWidth(true);b+=s;y=s>y?s:y});s=b>n?y:b;C.width(s).css("white-space",b>n?"":"nowrap")}O=T.outerWidth();L=T.outerHeight(true);q=L<=a&&O<=n;ae.scrollLock=q;if(oe.display=="modal"){l=(n-O)/2;o=g+(a-L)/2}else if(oe.display=="bubble"){m=true;w=e(".dw-arrw-i",W);f=M.offset();u=Math.abs(e(oe.context).offset().top-f.top);c=Math.abs(e(oe.context).offset().left-f.left);d=M.outerWidth();r=M.outerHeight();l=i(c-(T.outerWidth(true)-d)/2-x,3,n-O-3);o=u-L;if(o<g||u>g+a){T.removeClass("dw-bubble-top").addClass("dw-bubble-bottom");o=u+r}else{T.removeClass("dw-bubble-bottom").addClass("dw-bubble-top")}h=w.outerWidth();v=i(c+d/2-(l+(O-h)/2)-x,0,h);e(".dw-arr",W).css({left:v})}else{if(oe.display=="top"){o=g}else if(oe.display=="bottom"){o=g+a-L}}k.top=o<0?0:o;k.left=l;T.css(k);D.height(0);p=Math.max(o+L,oe.context=="body"?e(document).height():te.scrollHeight);D.css({height:p,left:x});if(m&&(o+L>g+a||u>g+a)){Z=true;setTimeout(function(){Z=false},300);ee.scrollTop(Math.min(o+L-a,p-a))}}S=n;V=a};ae.enable=function(){oe.disabled=false;if(he){le.prop("disabled",false)}};ae.disable=function(){oe.disabled=true;if(he){le.prop("disabled",true)}};ae.setValue=function(t,i,n,a,s){ae.temp=e.isArray(t)?t.slice(0):oe.parseValue.call(se,t+"",ae);Ye(i,s===undefined?i:s,n,false,a,i)};ae.getValue=function(){return ae.values};ae.getValues=function(){var e=[],t;for(t in ae._selectedValues){e.push(ae._selectedValues[t])}return e};ae.changeWheel=function(t,i,n){if(W){var a=0,s=t.length;e.each(oe.wheels,function(l,o){e.each(o,function(l,o){if(e.inArray(a,t)>-1){ce[a]=o;e(".dw-ul",W).eq(a).html(We(a));s--;if(!s){ae.position();Ie(i,undefined,n);return false}}a++});if(!s){return false}})}};ae.isVisible=function(){return ve};ae.tap=function(e,i){var n,a;if(oe.tap){e.on("touchstart.dw mousedown.dw",function(e){e.preventDefault();n=h(e,"X");a=h(e,"Y")}).on("touchend.dw",function(e){if(Math.abs(h(e,"X")-n)<20&&Math.abs(h(e,"Y")-a)<20){i.call(this,e)}t()})}e.on("click.dw",function(e){if(!l){i.call(this,e)}e.preventDefault()})};ae.show=function(i){var n,s=0,l="";if(oe.disabled||ve){return}a=le;if(oe.display=="top"){I="slidedown"}if(oe.display=="bottom"){I="slideup"}Se();Pe("onBeforeShow",[]);if(I&&!i){l="dw-"+I+" dw-in"}var o='<div role="dialog" class="'+oe.theme+" dw-"+oe.display+(u?" dw"+u.replace(/\-$/,""):"")+(j?"":" dw-nobtn")+'"><div class="dw-persp">'+(!E?'<div class="dw dwbg dwi">':'<div class="dwo"></div><div class="dw dwbg '+l+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div>')+'<div class="dwwr"><div aria-live="assertive" class="dwv'+(oe.headerText?"":" dw-hidden")+'"></div><div class="dwcc">',d=e.isArray(oe.minWidth),r=e.isArray(oe.maxWidth),f=e.isArray(oe.fixedWidth);e.each(oe.wheels,function(t,i){o+='<div class="dwc'+(oe.mode!="scroller"?" dwpm":" dwsc")+(oe.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';e.each(i,function(e,t){ce[s]=t;n=t.label!==undefined?t.label:e;o+='<td><div class="dwwl dwrc dwwl'+s+'">'+(oe.mode!="scroller"?'<a href="#" tabindex="-1" class="dwb-e dwwb dwwbp" style="height:'+k+"px;line-height:"+k+'px;"><span>+</span></a><a href="#" tabindex="-1" class="dwb-e dwwb dwwbm" style="height:'+k+"px;line-height:"+k+'px;"><span>&ndash;</span></a>':"")+'<div class="dwl">'+n+'</div><div tabindex="0" aria-live="off" aria-label="'+n+'" role="listbox" class="dwww"><div class="dww" style="height:'+oe.rows*k+"px;"+(oe.fixedWidth?"width:"+(f?oe.fixedWidth[s]:oe.fixedWidth)+"px;":(oe.minWidth?"min-width:"+(d?oe.minWidth[s]:oe.minWidth)+"px;":"min-width:"+oe.width+"px;")+(oe.maxWidth?"max-width:"+(r?oe.maxWidth[s]:oe.maxWidth)+"px;":""))+'"><div class="dw-ul">';o+=We(s);o+='</div><div class="dwwol"></div></div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>';s++});o+="</tr></table></div></div>"});o+="</div>";if(E&&j){o+='<div class="dwbc">';e.each(ie,function(e,t){t=typeof t==="string"?ae.buttons[t]:t;o+="<span"+(oe.btnWidth?' style="width:'+100/ie.length+'%"':"")+' class="dwbw '+t.css+'"><a href="#" class="dwb dwb'+e+' dwb-e" role="button">'+t.text+"</a></span>"});o+="</div>"}o+="</div></div></div></div>";W=e(o);D=e(".dw-persp",W);A=e(".dwo",W);ve=true;Ie();Pe("onMarkupReady",[W]);if(E){W.appendTo(oe.context);if(I&&!i){W.addClass("dw-trans");setTimeout(function(){W.removeClass("dw-trans").find(".dw").removeClass(l)},350)}}else if(le.is("div")){le.html(W)}else{W.insertAfter(le)}Pe("onMarkupInserted",[W]);if(E){e(window).on("keydown.dw",function(e){if(e.keyCode==13){ae.select()}else if(e.keyCode==27){ae.cancel()}});if(oe.scrollLock){W.on("touchmove",function(e){if(q){e.preventDefault()}})}e("input,select,button",te).each(function(){if(!this.disabled){if(e(this).attr("autocomplete")){e(this).data("autocomplete",e(this).attr("autocomplete"))}e(this).addClass("dwtd").prop("disabled",true).attr("autocomplete","off")}});_e("scroll.dw",true)}ae.position();_e("orientationchange.dw resize.dw",false);W.on("DOMMouseScroll mousewheel",".dwwl",Te).on("keydown",".dwwl",ge).on("keyup",".dwwl",Ce).on("selectstart mousedown",m).on("click",".dwb-e",m).on("touchend",function(){if(oe.tap){t()}}).on("keydown",".dwb-e",function(t){if(t.keyCode==32){t.preventDefault();t.stopPropagation();e(this).click()}});setTimeout(function(){e.each(ie,function(t,i){ae.tap(e(".dwb"+t,W),function(e){i=typeof i==="string"?ae.buttons[i]:i;i.handler.call(this,e,ae)})});if(oe.closeOnOverlay){ae.tap(A,function(){ae.cancel()})}W.on(y,".dwwl",pe).on(y,".dwb-e",ye)},300);Pe("onShow",[W,M])};ae.hide=function(t,i,n){if(!ve||!n&&Pe("onClose",[M,i])===false){return}e(".dwtd",te).each(function(){e(this).prop("disabled",false).removeClass("dwtd");if(e(this).data("autocomplete")){e(this).attr("autocomplete",e(this).data("autocomplete"))}else{e(this).removeAttr("autocomplete")}});if(W){var s=E&&I&&!t;if(s){W.addClass("dw-trans").find(".dw").addClass("dw-"+I+" dw-out")}if(t){W.remove()}else{setTimeout(function(){W.remove();if(a){o=true;a.focus()}},s?350:1)}ee.off(".dw")}ue={};ve=false};ae.select=function(){if(ae.hide(false,"set")!==false){Ye(true,true,0,true);Pe("onSelect",[ae.val])}};ae.attachShow=function(e,t){we.push(e);if(oe.display!=="inline"){e.on((oe.showOnFocus?"focus.dw":"")+(oe.showOnTap?" click.dw":""),function(i){if((i.type!=="focus"||i.type==="focus"&&!o)&&!l){if(t){t()}a=e;ae.show()}setTimeout(function(){o=false},300)})}};ae.cancel=function(){if(ae.hide(false,"cancel")!==false){Pe("onCancel",[ae.val])}};ae.init=function(t){P=d.themes[t.theme||oe.theme];U=d.i18n[t.lang||oe.lang];b(p,t);Pe("onThemeLoad",[U,p]);b(oe,P,U,p);oe.buttons=oe.buttons||["set","cancel"];oe.headerText=oe.headerText===undefined?oe.display!=="inline"?"{value}":false:oe.headerText;ae.settings=oe;le.off(".dw");var i=d.presets[oe.preset];if(i){de=i.call(se,ae);b(oe,de,p)}T=Math.floor(oe.rows/2);k=oe.height;I=oe.animate;E=oe.display!=="inline";ie=oe.buttons;ee=e(oe.context=="body"?window:oe.context);te=e(oe.context)[0];if(!oe.setText){ie.splice(e.inArray("set",ie),1)}if(!oe.cancelText){ie.splice(e.inArray("cancel",ie),1)}if(oe.button3){ie.splice(e.inArray("set",ie)+1,0,{text:oe.button3Text,handler:oe.button3})}ae.context=ee;ae.live=!E||e.inArray("set",ie)==-1;ae.buttons.set={text:oe.setText,css:"dwb-s",handler:ae.select};ae.buttons.cancel={text:ae.live?oe.closeText:oe.cancelText,css:"dwb-c",handler:ae.cancel};ae.buttons.clear={text:oe.clearText,css:"dwb-cl",handler:function(){ae.trigger("onClear",[W]);le.val("");if(!ae.live){ae.hide()}}};j=ie.length>0;if(ve){ae.hide(true,false,true)}if(E){Se();if(he){if(J===undefined){J=se.readOnly}se.readOnly=true}ae.attachShow(le)}else{ae.show()}if(he){le.on("change.dw",function(){if(!N){ae.setValue(le.val(),false,.2)}N=false})}};ae.option=function(e,t){var i={};if(typeof e==="object"){i=e}else{i[e]=t}ae.init(i)};ae.destroy=function(){ae.hide(true,false,true);e.each(we,function(e,t){t.off(".dw")});e(window).off(".dwa");if(he){se.readOnly=J}delete r[se.id];Pe("onDestroy",[])};ae.getInst=function(){return ae};ae.getValidCell=qe;ae.trigger=Pe;r[se.id]=ae;ae.values=null;ae.val=null;ae.temp=null;ae.buttons={};ae._selectedValues={};ae.init(p)};function t(){l=true;setTimeout(function(){l=false},300)}function i(e,t,i){return Math.max(t,Math.min(e,i))}function n(t){var i={values:[],keys:[]};e.each(t,function(e,t){i.keys.push(e);i.values.push(t)});return i}var a,s,l,o,d=e.mobiscroll,r=d.instances,f=d.util,u=f.prefix,c=f.jsPrefix,w=f.has3d,h=f.getCoord,v=f.testTouch,p=function(){},m=function(e){e.preventDefault()},b=e.extend,y="touchstart mousedown",x="touchmove mousemove",g="touchend mouseup",C=b(d.defaults,{width:70,height:40,rows:3,delay:300,disabled:false,readonly:false,closeOnOverlay:true,showOnFocus:true,showOnTap:true,showLabel:true,wheels:[],theme:"",display:"modal",mode:"scroller",preset:"",lang:"en-US",context:"body",scrollLock:true,tap:true,btnWidth:true,speedUnit:.0012,timeUnit:.1,formatResult:function(e){return e.join(" ")},parseValue:function(t,i){var a=t.split(" "),s=[],l=0,o;e.each(i.settings.wheels,function(t,i){e.each(i,function(t,i){i=i.values?i:n(i);o=i.keys||i.values;if(e.inArray(a[l],o)!==-1){s.push(a[l])}else{s.push(o[0])}l++})});return s}});d.i18n.en=d.i18n["en-US"]={setText:"Set",selectedText:"Selected",closeText:"Close",cancelText:"Cancel",clearText:"Clear"};e(window).on("focus",function(){if(a){o=true}});e(document).on("mouseover mouseup mousedown click",function(e){if(l){e.stopPropagation();e.preventDefault();return false}})})(jQuery);
//# sourceMappingURL=mobiscroll-scroller.js.map