sap.ui.define(["sap/ui/test/Opa5","sap/ui/test/actions/Press","sap/ui/test/actions/EnterText","sap/ui/test/matchers/AggregationLengthEquals","sap/ui/test/matchers/AggregationFilled","sap/ui/test/matchers/PropertyStrictEquals","./Common","./shareOptions"],function(e,t,i,s,r,n,a,o){"use strict";var h="Worklist",c="table",u="searchField",l="*#-Q@@||";function g(e){var t=e[0],i=e[1],s=t.getItems();if(s.length===0){return false}return s.every(function(e){return e.getCells()[0].getTitle().indexOf(i.getValue())!==-1})}function m(e){var t=e.position;return{id:c,viewName:h,matchers:function(e){return e.getItems()[t]},actions:e.actions,success:e.success,errorMessage:"Table in view '"+h+"' does not contain an Item at position '"+t+"'"}}e.createPageObjects({onTheWorklistPage:{baseClass:a,actions:Object.assign({iPressATableItemAtPosition:function(e){return this.waitFor(m({position:e,actions:new t}))},iRememberTheItemAtPosition:function(e){return this.waitFor(m({position:e,success:function(e){var t=e.getBindingContext();this.getContext().currentItem={bindingPath:t.getPath(),id:t.getProperty("ObjectID"),name:t.getProperty("Name")}}}))},iPressOnMoreData:function(){return this.waitFor({id:c,viewName:h,matchers:function(e){return!!e.$("trigger").length},actions:new t,errorMessage:"The Table does not have a trigger"})},iWaitUntilTheListIsNotVisible:function(){return this.waitFor({id:c,viewName:h,visible:false,matchers:function(e){return!e.$().is(":visible")},errorMessage:"The Table is still visible"})},iSearchForTheFirstObject:function(){var e;return this.waitFor({id:c,viewName:h,matchers:new r({name:"items"}),success:function(t){e=t.getItems()[0].getCells()[0].getTitle();this.iSearchForValue(e);this.waitFor({id:[c,u],viewName:h,check:g,errorMessage:"Did not find any table entries or too many while trying to search for the first object."})},errorMessage:"Did not find table entries while trying to search for the first object."})},iSearchForValueWithActions:function(e){return this.waitFor({id:u,viewName:h,actions:e,errorMessage:"Failed to find search field in Worklist view.'"})},iSearchForValue:function(e){return this.iSearchForValueWithActions([new i({text:e}),new t])},iTypeSomethingInTheSearchThatCannotBeFoundAndTriggerRefresh:function(){var e=function(e){e.setValue(l);e.fireSearch({refreshButtonPressed:true})};return this.iSearchForValueWithActions(e)},iClearTheSearch:function(){return this.iSearchForValueWithActions([new i({text:""}),new t])},iSearchForSomethingWithNoResults:function(){return this.iSearchForValueWithActions([new i({text:l}),new t])}},o.createActions(h)),assertions:Object.assign({iShouldSeeTheTable:function(){return this.waitFor({id:c,viewName:h,success:function(t){e.assert.ok(t,"Found the object Table")},errorMessage:"Can't see the master Table."})},theTableShowsOnlyObjectsWithTheSearchStringInTheirTitle:function(){this.waitFor({id:[c,u],viewName:h,check:g,success:function(){e.assert.ok(true,"Every item did contain the title")},errorMessage:"The table did not have items"})},theTableHasEntries:function(){return this.waitFor({viewName:h,id:c,matchers:new r({name:"items"}),success:function(){e.assert.ok(true,"The table has entries")},errorMessage:"The table had no entries"})},theTableShouldHaveAllEntries:function(){var t,i;this.waitFor(this.createAWaitForAnEntitySet({entitySet:"Objects",success:function(e){t=e}}));return this.waitFor({id:c,viewName:h,matchers:function(e){i=Math.min(e.getGrowingThreshold(),t.length);return new s({name:"items",length:i}).isMatching(e)},success:function(t){e.assert.strictEqual(t.getItems().length,i,"The growing Table has "+i+" items")},errorMessage:"Table does not have all entries."})},theTitleShouldDisplayTheTotalAmountOfItems:function(){return this.waitFor({id:c,viewName:h,matchers:new r({name:"items"}),success:function(t){var i=t.getBinding("items").getLength();this.waitFor({id:"tableHeader",viewName:h,matchers:function(e){var t=e.getModel("i18n").getResourceBundle().getText("worklistTableTitleCount",[i]);return new n({name:"text",value:t}).isMatching(e)},success:function(){e.assert.ok(true,"The Page has a title containing the number "+i)},errorMessage:"The Page's header does not container the number of items "+i})},errorMessage:"The table has no items."})},theTableShouldHaveTheDoubleAmountOfInitialEntries:function(){var t;return this.waitFor({id:c,viewName:h,matchers:function(e){t=e.getGrowingThreshold()*2;return new s({name:"items",length:t}).isMatching(e)},success:function(){e.assert.ok(true,"The growing Table had the double amount: "+t+" of entries")},errorMessage:"Table does not have the double amount of entries."})},theTableShouldContainOnlyFormattedUnitNumbers:function(){return this.theUnitNumbersShouldHaveTwoDecimals("sap.m.ObjectNumber",h,"Object numbers are properly formatted","Table has no entries which can be checked for their formatting")},iShouldSeeTheWorklistViewsBusyIndicator:function(){return this.waitFor({id:"page",viewName:h,success:function(t){e.assert.ok(t.getParent().getBusy(),"The worklist view is busy")},errorMessage:"The worklist view is not busy"})},iShouldSeeTheWorklistTableBusyIndicator:function(){return this.waitFor({id:"table",viewName:h,matchers:new n({name:"busy",value:true}),autoWait:false,success:function(){e.assert.ok(true,"The worklist table is busy")},errorMessage:"The worklist table is not busy"})},iShouldSeeTheNoDataTextForNoSearchResults:function(){return this.waitFor({id:c,viewName:h,success:function(t){e.assert.strictEqual(t.getNoDataText(),t.getModel("i18n").getProperty("worklistNoDataWithSearchText"),"the table should show the no data text for search")},errorMessage:"table does not show the no data text for search"})}},o.createAssertions(h))}})});
//# sourceMappingURL=Worklist.js.map